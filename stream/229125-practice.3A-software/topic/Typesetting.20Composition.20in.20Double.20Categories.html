<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  	<meta name="viewport" content="width=device-width, initial-scale=1" />
  
<link rel="stylesheet" href="https://mattecapu.github.io/ct-zulip-archive/style.css" /><title>Typesetting Composition in Double Categories · practice: software · Zulip Chat Archive</title>
</head>
<body>
<header>
<a href="https://mattecapu.github.io/ct-zulip-archive" class="home-link">
        <img class="logo" src="https://zulip-avatars.s3.amazonaws.com/21317/realm/icon.png?version=3" />
        <h1>Category Theory<br/>Zulip Server<br/>Archive</h1>
        </a>
        <p>
        You're reading the public-facing archive of the <a href="https://categorytheory.zulipchat.com/">Category Theory Zulip server</a>.<br/>
        
        To join the server you need an invite. Anybody can get an invite by contacting <a href="https://matteocapucci.wordpress.com">Matteo Capucci</a> at <em>name dot surname at gmail dot com</em>.<br/>
        
        For all things related to this archive refer to the same person.
        </p>
        </header>
        <hr />
    
<h2>Stream: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/index.html">practice: software</a></h2>
<h3>Topic: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html">Typesetting Composition in Double Categories</a></h3>

<hr>

<base href="https://categorytheory.zulipchat.com">

<a name="522374711"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522374711" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522374711">(Jun 04 2025 at 14:31)</a>:</h4>
<p>Hi folks,</p>
<p>I'm trying to figure out how to typeset vertical and horizontal composition of cells in a double category well in LaTeX, and I imagine someone here has been through this before!</p>
<p>In particular, I'd like to be able to write vertical composition as in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>a</mi><mi>b</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{a}{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, and horizontal composition as in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∣</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \mid b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>. I've done this here as '\frac{a}{b}' and 'a \mid b', and while this works well when I have only two arguments it sort of breaks down when I have more than two.</p>
<p>For example, in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mfrac><mi>a</mi><mi>b</mi></mfrac><mfrac><mi>c</mi><mi>d</mi></mfrac></mfrac></mrow><annotation encoding="application/x-tex">\frac{\frac{a}{b}}{\frac{c}{d}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.6207em;vertical-align:-0.5858em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0349em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5508em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5858em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, which is '\frac{\frac{a}{b}}{\frac{c}{d}}', the fact that \frac resizes its arguments is causing a problem. I would want all three horizontal lines to be the same size! Using '\mid' for horizontal composition causes similar problems, since it's a symbol of fixed height, and its operands can be quite tall.</p>
<p>I'm aware that one solution to this problem is to write vertical composition as something like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>∙</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \bullet b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∙</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>. Personally I find the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mi>a</mi><mi>b</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{a}{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> notation a lot clearer, particularly when terms become large, so if it isn't too much  of a fuss I'd like to use that.</p>
<p>Does anyone have a good way to do this?</p>



<a name="522375709"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522375709" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathanael Arkor <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522375709">(Jun 04 2025 at 14:35)</a>:</h4>
<p>Could you simply use an inline table?</p>



<a name="522421609"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522421609" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522421609">(Jun 04 2025 at 18:07)</a>:</h4>
<p>You could also make a macro with <code>\genfrac</code> that doesn't resize its arguments.  And something like <code>\left. a \middle| b \right.</code></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>x</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac linethickness="0.1em"><mrow><mi>a</mi><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mfrac linethickness="0.1em"><mi>b</mi><mi>c</mi></mfrac></mrow><mi>d</mi></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mfrac linethickness="0.1em"><mrow><mi>a</mi><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mi>b</mi></mrow><mrow><mi>c</mi><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mi>d</mi></mrow></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mfrac linethickness="0.1em"><mi>a</mi><mi>c</mi></mfrac><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mfrac linethickness="0.1em"><mi>b</mi><mi>d</mi></mfrac></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\def\vc{\genfrac{}{}{1pt}{0}}%
\def\hc#1#2{\left.#1\middle|#2\right.}%
\begin{aligned}
x &amp;= \vc {\hc a{\vc b c}}d \\
\vc{\hc a b}{\hc c d} &amp;= \hc{\vc a c}{\vc b d} \\
\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.0944em;vertical-align:-3.2972em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.7972em;"><span style="top:-5.7972em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span><span style="top:-3.1028em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6em;"><span style="top:-2.15em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord mathnormal">c</span><span class="delimcenter" style="top:0em;">∣</span><span class="mord mathnormal">d</span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.2em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.1em;"></span></span><span style="top:-3.85em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord mathnormal">a</span><span class="delimcenter" style="top:0em;">∣</span><span class="mord mathnormal">b</span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.2972em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.7972em;"><span style="top:-5.7972em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3em;"><span style="top:-2.6555em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-3.65em;"><span class="pstrut" style="height:3.45em;"></span><span class="frac-line" style="border-bottom-width:0.1em;"></span></span><span style="top:-5em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord mathnormal">a</span><span><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.333em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.333em" height="2.400em" viewBox="0 0 333 2400"><path d="M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span><span style="top:-3.2em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.1em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7944em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.1028em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span><span style="top:-3.2em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.1em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.45em;"><span class="pstrut" style="height:4.4em;"></span><span style="width:0.333em;height:2.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.333em" height="2.400em" viewBox="0 0 333 2400"><path d="M145 15 v585 v1200 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-1200 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v1200 v585 h43z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.2056em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span style="top:-3.2em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.1em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7944em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.2972em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>



<a name="522421864"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522421864" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522421864">(Jun 04 2025 at 18:09)</a>:</h4>
<p>(You can use "view original message" in the hamburger menu to see the macrology I used to do that.)</p>



<a name="522424916"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522424916" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522424916">(Jun 04 2025 at 18:26)</a>:</h4>
<p>(There are advantages to the inline table idea too, especially for if you're using higher-arity composition in one or both directions.)</p>



<a name="522511837"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522511837" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522511837">(Jun 05 2025 at 06:49)</a>:</h4>
<p>Thanks for the suggestions!</p>
<p>My (admittedly naive) attempt to do this using tables didn't really work out.  Nesting a 'horizontal' tabular environment (e.g., {c | c}) inside of a 'vertical' one (e.g., {c}) makes the vertical lines touch the horizontal lines, as in: <br>
<a href="/user_uploads/21317/TL0MB9oq6FzFWWblW4CVP2Ny/composition-with-tables.png">composition-with-tables.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/21317/TL0MB9oq6FzFWWblW4CVP2Ny/composition-with-tables.png" title="composition-with-tables.png"><img data-original-content-type="image/png" data-original-dimensions="338x210" src="/user_uploads/thumbnail/21317/TL0MB9oq6FzFWWblW4CVP2Ny/composition-with-tables.png/840x560.webp"></a></div><p>The above table is the result of the following LaTeX code:</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>Code</p>
</div><div aria-hidden="true" class="spoiler-content">
<p>\begin{tabular}{c}<br>
      $n$ \\<br>
      \hline<br>
    \begin{tabular}{c | c | c}<br>
      \begin{tabular}{c}<br>
        $x_0$ \\<br>
        \hline<br>
        $x_1$ \\<br>
        \hline<br>
        $x_2$ <br>
      \end{tabular}<br>
      &amp;<br>
      $y$<br>
      &amp;<br>
      \begin{tabular}{c}<br>
        $a$ \\<br>
        \hline<br>
        \begin{tabular}{c | c}<br>
          $b$ &amp; $c$<br>
        \end{tabular}<br>
      \end{tabular}<br>
    \end{tabular}<br>
    \\<br>
    \hline $f$<br>
    \end{tabular}</p>
</div></div>
<p>The \genfrac approach fares better, but there is still some spacing weirdness, apparently caused by nested vertical composition:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable columnalign="right left" columnspacing="0em" rowspacing="0.25em"><mtr><mtd><mstyle displaystyle="true" scriptlevel="0"><mrow></mrow></mstyle></mtd><mtd><mstyle displaystyle="true" scriptlevel="0"><mrow><mrow></mrow><mfrac linethickness="0.04em"><mfrac linethickness="0.04em"><mi>n</mi><mrow><mrow><mfrac linethickness="0.04em"><mfrac linethickness="0.04em"><msub><mi>x</mi><mn>0</mn></msub><msub><mi>x</mi><mn>1</mn></msub></mfrac><msub><mi>x</mi><mn>2</mn></msub></mfrac><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mi>y</mi></mrow><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mfrac linethickness="0.04em"><mi>a</mi><mrow><mi>b</mi><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mi>c</mi></mrow></mfrac></mrow></mfrac><mi>f</mi></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\def\vc{\genfrac{}{}{0.4pt}{0}}%
\def\hc#1#2{\left.#1\middle|#2\right.}%
\begin{aligned}
      &amp; \vc{\vc{n}{\hc{\hc{\vc{\vc{x_0}{x_1}}{x_2}}{y}}{\vc{a}{\hc{b}{c}}}}}{f} \\
    \end{aligned}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:6.768em;vertical-align:-3.134em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.634em;"><span style="top:-5.634em;"><span class="pstrut" style="height:7.5876em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.134em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.634em;"><span style="top:-5.634em;"><span class="pstrut" style="height:7.5876em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.5876em;"><span style="top:-2.4216em;"><span class="pstrut" style="height:3.1076em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span><span style="top:-3.3376em;"><span class="pstrut" style="height:3.1076em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-7.5876em;"><span class="pstrut" style="height:3.1076em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.11em;"><span class="pstrut" style="height:4.35em;"></span><span class="mord"><span class="minner"><span class="mopen nulldelimiter"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3336em;"><span style="top:-2.4216em;"><span class="pstrut" style="height:3.1076em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.3376em;"><span class="pstrut" style="height:3.1076em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.3336em;"><span class="pstrut" style="height:3.1076em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.333em;height:4.200em;"><svg height="4.200em" viewbox="0 0 333 4200" width="0.333em" xmlns="http://www.w3.org/2000/svg"><path d="M145 15 v585 v3000 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-3000 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v3000 v585 h43z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose nulldelimiter"></span></span><span><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.333em;height:4.200em;"><svg height="4.200em" viewbox="0 0 333 4200" width="0.333em" xmlns="http://www.w3.org/2000/svg"><path d="M145 15 v585 v3000 v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v-3000 v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v3000 v585 h43z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord mathnormal">b</span><span class="delimcenter" style="top:0em;">∣</span><span class="mord mathnormal">c</span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-4.58em;"><span class="pstrut" style="height:4.35em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-5.027em;"><span class="pstrut" style="height:4.35em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.09em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.134em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>Both approaches seem like they could be perfect with a few tweaks. I'll do some reading...</p>
<p>Thanks again!</p>



<a name="522514041"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522514041" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522514041">(Jun 05 2025 at 07:03)</a>:</h4>
<p>Curiously, the "vertical lines extend too far, touching the horizontal lines" thing also happens when I use tables for vertical composition and the command \hc for horizontal composition.</p>



<a name="522521484"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522521484" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522521484">(Jun 05 2025 at 07:41)</a>:</h4>
<p>The issue with using \genfrac for this is that it gives the top and bottom arguments an equal amount of space, which looks weird when, say, the top argument is much larger than the bottom argument.</p>



<a name="522526537"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522526537" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathanael Arkor <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522526537">(Jun 05 2025 at 08:07)</a>:</h4>
<p>To clarify, I didn't mean to suggest nesting tables. I meant that you could use a single table, because it is not important to distinguish between a horizontal composite of vertical composites, and a vertical composite of horizontal composites, since they are equal in a double category.</p>



<a name="522529943"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522529943" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522529943">(Jun 05 2025 at 08:24)</a>:</h4>
<p>I think I still need to be able to make, for example, this shape:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mfrac linethickness="0.04em"><mi>a</mi><mfrac linethickness="0.04em"><mrow><msub><mi>b</mi><mn>0</mn></msub><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><mrow><msub><mi>b</mi><mn>1</mn></msub><mo fence="true" lspace="0.05em" rspace="0.05em">|</mo><msub><mi>b</mi><mn>2</mn></msub></mrow></mrow><mi>c</mi></mfrac></mfrac></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\def\vc{\genfrac{}{}{0.4pt}{0}}%
\def\hc#1#2{\left.#1\middle|#2\right.}%
\begin{aligned}
      &amp; \vc{a}{\vc{\hc{b_0}{\hc{b_1}{b_2}}}{c}}
    \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.4106em;vertical-align:-1.4553em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9553em;"><span style="top:-3.9553em;"><span class="pstrut" style="height:3.1076em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4553em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9553em;"><span style="top:-3.9553em;"><span class="pstrut" style="height:3.1076em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">c</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="delimcenter" style="top:0em;">∣</span><span class="minner"><span class="mopen nulldelimiter"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="delimcenter" style="top:0em;">∣</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.657em;"><span class="pstrut" style="height:3.427em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.104em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord mathnormal">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.003em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4553em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>I don't see how I would do it  as single table, but it is entirely possible that I just don't understand how tables work.</p>



<a name="522534864"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522534864" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathanael Arkor <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522534864">(Jun 05 2025 at 08:48)</a>:</h4>
<p>Most LaTeX packages for tables have support for multi-row and multi-column cells, which achieves this. (I think the best one is <code>tabularray</code>.)</p>



<a name="522538121"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229125-practice%3A%20software/topic/Typesetting%20Composition%20in%20Double%20Categories/near/522538121" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229125-practice.3A-software/topic/Typesetting.20Composition.20in.20Double.20Categories.html#522538121">(Jun 05 2025 at 09:03)</a>:</h4>
<p>I didn't know that. Thanks!</p>



<footer class="site-footer">

<hr><p>Last updated: Feb 28 2026 at 12:12 UTC</p>
This archive runs on a customization of <a href="https://github.com/zulip/zulip-archive">zulip-archive</a>
</footer>
</body>

</html>