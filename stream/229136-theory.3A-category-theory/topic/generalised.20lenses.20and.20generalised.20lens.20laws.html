<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  	<meta name="viewport" content="width=device-width, initial-scale=1" />
  
<link rel="stylesheet" href="https://mattecapu.github.io/ct-zulip-archive/style.css" /><title>generalised lenses and generalised lens laws · theory: category theory · Zulip Chat Archive</title>
</head>
<body>
<header>
<a href="https://mattecapu.github.io/ct-zulip-archive" class="home-link">
        <img class="logo" src="https://zulip-avatars.s3.amazonaws.com/21317/realm/icon.png?version=3" />
        <h1>Category Theory<br/>Zulip Server<br/>Archive</h1>
        </a>
        <p>
        You're reading the public-facing archive of the <a href="https://categorytheory.zulipchat.com/">Category Theory Zulip server</a>.<br/>
        
        To join the server you need an invite. Anybody can get an invite by contacting <a href="https://matteocapucci.wordpress.com">Matteo Capucci</a> at <em>name dot surname at gmail dot com</em>.<br/>
        
        For all things related to this archive refer to the same person.
        </p>
        </header>
        <hr />
    
<h2>Stream: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/index.html">theory: category theory</a></h2>
<h3>Topic: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html">generalised lenses and generalised lens laws</a></h3>

<hr>

<base href="https://categorytheory.zulipchat.com">

<a name="252901977"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/252901977" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel Virgo <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#252901977">(Sep 11 2021 at 11:10)</a>:</h4>
<p>This is a vague question, I'm just wondering if anyone's thought about it or has any random insights.</p>
<p>There is a notion of "Generalised lenses" or "<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>-lenses" or "Grothendieck lenses", explained in David Spivak's <a href="https://arxiv.org/abs/1908.02202">Generalized Lens Categories via Functors <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="script">C</mi><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo>→</mo><mrow><mi mathvariant="sans-serif">C</mi><mi mathvariant="sans-serif">a</mi><mi mathvariant="sans-serif">t</mi></mrow></mrow><annotation encoding="application/x-tex">\mathscr{C}^\mathrm{op}\to \mathsf{Cat}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7em;vertical-align:0em;"></span><span class="mord"><span class="mord mathscr" style="margin-right:0.1689em;">C</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">op</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord"><span class="mord mathsf">Cat</span></span></span></span></span></a>. This gives a very general notion of lens, but often it's desirable to impose some extra 'laws' on the lenses it produces.</p>
<p>Here are some examples:</p>
<ul>
<li>
<p>in a Cartesian category, if we take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> to be a particular functor that maps an object <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> to the category of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>-parametrised morphisms, then we obtain the usual category of lenses. However, depending on the application, it can be desirable to impose the traditional lens laws (PutGet, GetPut and PutPut) or some variation of them.</p>
</li>
<li>
<p>In the paper linked above, Spivak obtains "dependent lenses" by taking <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> to be a different functor. These dependent lenses are very closely related to polynomial functors, but, at least if I understood correctly, they're not <em>quite</em> the same. Polynomial functors are like dependent lenses that obey an additional law, given by the left-hand square in the diagram below, which is from David Spivak's <a href="https://arxiv.org/abs/2005.01894">Poly: An abundant categorical setting for mode-dependent dynamics</a></p>
</li>
</ul>
<p><a href="/user_uploads/21317/2fardnd7u7FqUALIaZvz9ENZ/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/21317/2fardnd7u7FqUALIaZvz9ENZ/image.png" title="image.png"><img src="/user_uploads/21317/2fardnd7u7FqUALIaZvz9ENZ/image.png"></a></div><p>(I don't think this law arises automatically from the construction in the generalized lenses paper, but I could be wrong and I'm happy to be corrected if so.)</p>
<ul>
<li>In <span class="user-mention" data-user-id="277554">@Toby Smithe</span>'s work, e.g. <a href="https://arxiv.org/pdf/2109.04461.pdf">Compositional Active Inference I: Bayesian Lenses. Statistical Games.</a>, we can take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> to be another functor to obtain a category of "Bayesian lenses". But it's sometimes useful to impose another law upon them to turn them into "exact Bayesian lenses."</li>
</ul>
<p>I'm not 100% sure that all three of these "laws" are really the same kind of thing. But it seems striking and perhaps a bit unsatisfying that we can obtain lenses from a functor by performing this slick construction, but then having done that we often actually want a subcategory of the result, which has to be defined explicitly by adding these extra conditions. So I was wondering if there might be some deeper way to see where various kinds of laws we might want to impose come from. In other words, might there be some variation of the Grothendieck construction approach where not only the lenses but also their laws "pop out" of the construction in some way?</p>



<a name="252908003"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/252908003" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matteo Capucci (he/him) <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#252908003">(Sep 11 2021 at 13:00)</a>:</h4>
<p>Construction 1 and 2 are exactly the same, dependent lenses do not satisfy an extra law</p>



<a name="252908286"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/252908286" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matteo Capucci (he/him) <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#252908286">(Sep 11 2021 at 13:04)</a>:</h4>
<p>But you can add another example, similar to that of exact Bayesian lenses (and I suspect it's no coincidence): cartesian differential categories can be represented as subcategories of lenses, namely those lenses whose backward part is linear in a certain sense</p>



<a name="252912526"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/252912526" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel Virgo <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#252912526">(Sep 11 2021 at 14:20)</a>:</h4>
<p>It was polynomial functors that I thought satisfied an extra law, rather than dependent lenses. Here's the description of dependent lenses from 'Generalised Lens Categories'</p>
<p><a href="/user_uploads/21317/piOBGp_3ch7T5M8aL_B-aXXC/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/21317/piOBGp_3ch7T5M8aL_B-aXXC/image.png" title="image.png"><img src="/user_uploads/21317/piOBGp_3ch7T5M8aL_B-aXXC/image.png"></a></div><p>Polynomial functors fit this description but they also have to obey the extra law that this diagram commutes:</p>
<p><a href="/user_uploads/21317/V6CfeN4LCKzch-si7V8Li1zU/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/21317/V6CfeN4LCKzch-si7V8Li1zU/image.png" title="image.png"><img src="/user_uploads/21317/V6CfeN4LCKzch-si7V8Li1zU/image.png"></a></div><p>This is because in the polynomial functor case <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>f</mi><mi mathvariant="normal">♯</mi></msup></mrow><annotation encoding="application/x-tex">f^\sharp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">♯</span></span></span></span></span></span></span></span></span></span></span> can be thought of as a collection of functions mapping each fibre of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mspace></mspace><mspace width="0.1111111111111111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333333333333333em"/><mi>y</mi><mo>→</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">q\colon y\to d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111111111111111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> to a corresponding fibre of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mspace></mspace><mspace width="0.1111111111111111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333333333333333em"/><mi>x</mi><mo>→</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">p\colon x\to c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111111111111111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span>. Without this extra condition they can map to any element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>, not just the corresponding fibre of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span>.</p>
<p>Is it just that dependent lenses do also end up obeying this law as well? I haven't gone through all the details of deriving them from the Grothendieck construction yet, which is why I was a bit unsure about this example.</p>



<a name="252925636"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/252925636" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#252925636">(Sep 11 2021 at 18:05)</a>:</h4>
<p>First of all this is a beautiful example of the microcosm principle.  In Johnson, Rosebrugh and Wood's <a href="https://www.mta.ca/~rrosebru/articles/Lens2Cambridge.pdf">Lenses, fibrations and universal translations</a> by  we learn that we can see split Grothendieck (op)fibrations as categorified lenses, and here we learn that they are also categories <em>of</em> generalized prelenses.</p>
<p>Secondly, I have been thinking a lot about laws for "outlaw lenses" lately.  This thinking is still in a state of flux, but it seems to be closely tied to what I am calling "secant categories".  For a category <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">C</mi></mrow><annotation encoding="application/x-tex">\mathcal{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span></span></span>, the secant category <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi mathvariant="script">C</mi></mrow><annotation encoding="application/x-tex">S\mathcal{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span></span></span> has</p>
<ul>
<li>as objects: pairs <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi mathvariant="script">A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(A,\mathcal{A})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathcal">A</span><span class="mclose">)</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> an object of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">C</mi></mrow><annotation encoding="application/x-tex">\mathcal{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">A</mi></mrow><annotation encoding="application/x-tex">\mathcal{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathcal">A</span></span></span></span> an "<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span>-colored monoid" -- an internal category whose object of objects must be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span>.</li>
<li>as morphisms: pairs <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>f</mi><mo separator="true">,</mo><mi mathvariant="script">F</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(f, \mathcal{F})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathcal" style="margin-right:0.09931em;">F</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> is a function and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">F</mi></mrow><annotation encoding="application/x-tex">\mathcal{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathcal" style="margin-right:0.09931em;">F</span></span></span></span> is a cofunctor with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> as its action on objects.</li>
</ul>
<p>There is an obvious functor back to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">C</mi></mrow><annotation encoding="application/x-tex">\mathcal{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span></span></span> that should be a fibration.</p>
<p>The normal lens laws for "very well-behaved lenses" or what I usually just call "lenses" come from the objects in this category that look like indiscrete categories and represent the notion of "an update is total replacement".  There are a lot of other objects in this category though and they each give a notion of lens that respects the identity and composition in that object.</p>
<p>(I don't have the full list of references to hand, but if anyone ends up doing archaeology on this post, the notion of "secant category" was inspired by both tangent categories and the notion of "change structure" in the functional programming literature seen at, e.g. <a href="https://bentnib.org/posts/2015-04-23-incremental-lambda-calculus-and-parametricity.html">https://bentnib.org/posts/2015-04-23-incremental-lambda-calculus-and-parametricity.html</a> )</p>
<p>(EDIT: It also occurs to me that I have heard something tangentially about someone claiming cofunctors as generalized lenses; it would be surprising if this didn't turn out to be the same insight as that.)</p>



<a name="252925726"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/252925726" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#252925726">(Sep 11 2021 at 18:07)</a>:</h4>
<p>To relate it back, I think these laws will follow naturally when we see what the "update data" in the lens is being used for in each of these examples.</p>



<a name="252933051"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/252933051" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#252933051">(Sep 11 2021 at 20:26)</a>:</h4>
<p>It seems that indeed Bryce Clarke (also on this server; not sure if I should ping or not) put these pieces together before I did:</p>
<ul>
<li><a href="https://arxiv.org/abs/2009.06835">Clarke, Bryce. "Internal lenses as functors and cofunctors." arXiv preprint arXiv:2009.06835 (2020).</a></li>
</ul>
<p>I can't seem to figure out the purpose of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> in Definition 19 (top of Section 4, the key definition of an internal lens), though; without it an internal lens reduces to merely a cofunctor, which seems neater.</p>



<a name="253010291"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/253010291" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matteo Capucci (he/him) <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#253010291">(Sep 12 2021 at 20:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="276071">Nathaniel Virgo</span> <a href="#narrow/stream/229136-theory.3A-category.20theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws/near/252912526">said</a>:</p>
<blockquote>
<p>It was polynomial functors that I thought satisfied an extra law, rather than dependent lenses. Here's the description of dependent lenses from 'Generalised Lens Categories'</p>
<p><a href="/user_uploads/21317/piOBGp_3ch7T5M8aL_B-aXXC/image.png">image.png</a> </p>
<p>Polynomial functors fit this description but they also have to obey the extra law that this diagram commutes:</p>
<p><a href="/user_uploads/21317/V6CfeN4LCKzch-si7V8Li1zU/image.png">image.png</a> </p>
<p>This is because in the polynomial functor case <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>f</mi><mi mathvariant="normal">♯</mi></msup></mrow><annotation encoding="application/x-tex">f^\sharp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">♯</span></span></span></span></span></span></span></span></span></span></span> can be thought of as a collection of functions mapping each fibre of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mspace></mspace><mspace width="0.1111111111111111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333333333333333em"/><mi>y</mi><mo>→</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">q\colon y\to d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111111111111111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> to a corresponding fibre of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mspace></mspace><mspace width="0.1111111111111111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333333333333333em"/><mi>x</mi><mo>→</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">p\colon x\to c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111111111111111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333333333333333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">c</span></span></span></span>. Without this extra condition they can map to any element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>, not just the corresponding fibre of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span>.</p>
<p>Is it just that dependent lenses do also end up obeying this law as well? I haven't gone through all the details of deriving them from the Grothendieck construction yet, which is why I was a bit unsure about this example.</p>
</blockquote>
<p>Yeah I'm pretty sure that's also satisfied by dependent lenses. The excerpt you mention doesn't state the commutativity condition again, but that's implied by their definition as a Grothendieck construction.</p>



<a name="253010309"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/253010309" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matteo Capucci (he/him) <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#253010309">(Sep 12 2021 at 20:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="438995">James Deikun</span> <a href="#narrow/stream/229136-theory.3A-category.20theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws/near/252925636">said</a>:</p>
<blockquote>
<p>First of all this is a beautiful example of the microcosm principle.  In Johnson, Rosebrugh and Wood's <a href="https://www.mta.ca/~rrosebru/articles/Lens2Cambridge.pdf">Lenses, fibrations and universal translations</a> by  we learn that we can see split Grothendieck (op)fibrations as categorified lenses, and here we learn that they are also categories <em>of</em> generalized prelenses.</p>
</blockquote>
<p>This is very cool indeed!</p>



<a name="253339441"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/253339441" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryce Clarke <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#253339441">(Sep 14 2021 at 23:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="438995">James Deikun</span> <a href="#narrow/stream/229136-theory.3A-category.20theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws/near/252933051">said</a>:</p>
<blockquote>
<p>It seems that indeed Bryce Clarke (also on this server; not sure if I should ping or not) put these pieces together before I did:</p>
<ul>
<li><a href="https://arxiv.org/abs/2009.06835">Clarke, Bryce. "Internal lenses as functors and cofunctors." arXiv preprint arXiv:2009.06835 (2020).</a></li>
</ul>
<p>I can't seem to figure out the purpose of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> in Definition 19 (top of Section 4, the key definition of an internal lens), though; without it an internal lens reduces to merely a cofunctor, which seems neater.</p>
</blockquote>
<p>The <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> tells us that every morphism in the source category determines a morphism in the view category (rather than just on objects / states). This axiom really allows us to understand the Put action as a <em>lift</em> of morphisms. While there is lots one can do with cofunctors, (delta) lenses generally have much nicer properties (lots of research has been done in this direction, but there is still plenty to do!).</p>



<a name="253339821"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/253339821" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryce Clarke <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#253339821">(Sep 14 2021 at 23:31)</a>:</h4>
<p>Choosing between cofunctors and delta lenses really comes down to what level of generality you need. Both have a (forwards) assignment on objects. Cofunctors have a backwards lifting on morphisms, and delta lenses also have a forwards assignment on morphisms. It's worth mentioning that there are many nice relationships between delta lenses and cofunctors too; for example, in a <a href="https://arxiv.org/abs/2108.00390">recent paper</a> I show it is possible to construct a cofree delta lens from every cofunctor.</p>



<a name="253341500"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/253341500" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#253341500">(Sep 14 2021 at 23:49)</a>:</h4>
<p>Hm, there is certainly a use for being able to lower updates to the view as well as lifting them from it; but on the other hand cofunctors are much nicer objects in other ways as well, and for the project of bringing lawfulness to "bimorphic lenses" I'm not at all sure lowering updates is always possible over there.  Having worked on FRP and incremental database views I can see how nice delta lenses would be in those particular applications though ...</p>



<a name="253345917"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/253345917" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#253345917">(Sep 15 2021 at 00:43)</a>:</h4>
<p>One way to think about this that I'd just like to throw out there is: vectors push forward, forms pull back.  If you think of a type as a space, then if your 'delta' is a vector the appropriate map is a functor, if it is a form your appropriate map is a cofunctor.  If your type is a Riemannian space with an identification between vectors and forms via the metric, then wouldn't the appropriate map be something like a delta lens?  This suggests there could be space for all three of these things in the world.  (Though for functors there was never much danger ...)</p>



<a name="278297136"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/278297136" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#278297136">(Apr 08 2022 at 12:34)</a>:</h4>
<p>This seems as good a place to ask as any:</p>
<p>I'm looking for a citation to back up the assertion that "morphisms of polynomial functors are lenses". Is there a usual one?</p>



<a name="278299897"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/278299897" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jules Hedges <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#278299897">(Apr 08 2022 at 12:58)</a>:</h4>
<p>The equivalence of categories between [polynomials, natural transformations] and [containers, morphisms of containers] appears first in whatever is the first paper on containers. Then you look at the definition of morphisms of containers and say "well, duh, it's the same as a lens"</p>



<a name="278306009"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/278306009" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#278306009">(Apr 08 2022 at 13:46)</a>:</h4>
<p>Hmm okay. Thanks.</p>



<a name="278306059"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/278306059" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#278306059">(Apr 08 2022 at 13:47)</a>:</h4>
<p>I might just shuffle this into an "among other things".</p>



<a name="278306164"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229136-theory%3A%20category%20theory/topic/generalised%20lenses%20and%20generalised%20lens%20laws/near/278306164" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chad Nester <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229136-theory.3A-category-theory/topic/generalised.20lenses.20and.20generalised.20lens.20laws.html#278306164">(Apr 08 2022 at 13:47)</a>:</h4>
<p>I do have to read more about containers though :)</p>



<footer class="site-footer">

<hr><p>Last updated: Nov 01 2025 at 12:09 UTC</p>
This archive runs on a customization of <a href="https://github.com/zulip/zulip-archive">zulip-archive</a>
</footer>
</body>

</html>