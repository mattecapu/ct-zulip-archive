<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  	<meta name="viewport" content="width=device-width, initial-scale=1" />
  
<link rel="stylesheet" href="https://mattecapu.github.io/ct-zulip-archive/style.css" /><title>expectation · theory: categorical probability · Zulip Chat Archive</title>
</head>
<body>
<header>
<a href="https://mattecapu.github.io/ct-zulip-archive" class="home-link">
        <img class="logo" src="https://zulip-avatars.s3.amazonaws.com/21317/realm/icon.png?version=3" />
        <h1>Category Theory<br/>Zulip Server<br/>Archive</h1>
        </a>
        <p>
        You're reading the public-facing archive of the <a href="https://categorytheory.zulipchat.com/">Category Theory Zulip server</a>.<br/>
        
        To join the server you need an invite. Anybody can get an invite by contacting <a href="https://matteocapucci.wordpress.com">Matteo Capucci</a> at <em>name dot surname at gmail dot com</em>.<br/>
        
        For all things related to this archive refer to the same person.
        </p>
        </header>
        <hr />
    
<h2>Stream: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/index.html">theory: categorical probability</a></h2>
<h3>Topic: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html">expectation</a></h3>

<hr>

<base href="https://categorytheory.zulipchat.com">

<a name="281359371"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281359371" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Breiner <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281359371">(May 05 2022 at 21:07)</a>:</h4>
<p>Hi all. If I have a state in a Markov category, what do I need to assume to be able to compute an expectation, and what does that look like diagrammatically?</p>



<a name="281360171"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281360171" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Breiner <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281360171">(May 05 2022 at 21:14)</a>:</h4>
<p>I think I would like to appeal to the law of large numbers and to say something like  the limiting average of i.i.d. copies of the state, which should limit to a Dirac distribution under some nice conditions. But maybe this characterization should be a theorem instead?<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mi>l</mi><mi>i</mi><msub><mi>m</mi><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></msub><mfrac><mn>1</mn><mi>n</mi></mfrac><mo stretchy="false">(</mo><mi>n</mi><mo>⋅</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">E(p) = lim_{n\to\infty} \frac{1}{n}(n\cdot p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">i</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span></p>



<a name="281360591"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281360591" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Breiner <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281360591">(May 05 2022 at 21:18)</a>:</h4>
<p>I suppose that in many cases an expectation is an algebra for the probability monad, but I don't know what that looks like in general Markov categories.</p>



<a name="281360838"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281360838" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Spencer Breiner <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281360838">(May 05 2022 at 21:20)</a>:</h4>
<p>I imagine this should involve  "representable" Markov categories and distribution objects to dig deterministic values out of markov processes, but I didn't see any systematic discussion of expectation and variance in the <a href="https://arxiv.org/pdf/2010.07416.pdf">that paper</a>.</p>



<a name="281373290"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281373290" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Baez <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281373290">(May 05 2022 at 23:41)</a>:</h4>
<p>I can't help but I like the use of the term "dig" here.</p>



<a name="281378496"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281378496" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel Virgo <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281378496">(May 06 2022 at 01:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="278008">Spencer Breiner</span> <a href="#narrow/stream/253118-theory.3A-probability/topic/expectation/near/281360591">said</a>:</p>
<blockquote>
<p>I suppose that in many cases an expectation is an algebra for the probability monad, but I don't know what that looks like in general Markov categories.</p>
</blockquote>
<p>A long while ago I thought a bit about generalising algebras of probability monads to general Markov categories. It seems like you want the following thing:</p>
<ul>
<li>an object <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> in your Markov category <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">C</mi></mrow><annotation encoding="application/x-tex">\mathscr{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7em;"></span><span class="mord mathscr" style="margin-right:0.1689em;">C</span></span></span></span></li>
<li>for every object <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>, a map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mspace></mspace><mspace width="0.1111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"/><mi mathvariant="script">C</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo><mo>→</mo><msub><mi mathvariant="script">C</mi><mtext>det</mtext></msub><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}\colon \mathscr{C}(A,C)\to \mathscr{C}_\text{det}(A,C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em;"></span><span class="mord mathscr" style="margin-right:0.1689em;">C</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathscr" style="margin-right:0.1689em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1689em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">det</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">)</span></span></span></span> such that<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><msub><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">d</mi></mrow><mi>C</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">d</mi></mrow><mi>C</mi></msub></mrow><annotation encoding="application/x-tex">\mathbb{E}(\mathrm{id}_C) = \mathrm{id}_C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">id</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">id</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width="0.1111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"/><mi>A</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">f\colon A\to B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mspace></mspace><mspace width="0.1111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"/><mi>B</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">g\colon B\to C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> we have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi>f</mi><mo separator="true">;</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi>f</mi><mo separator="true">;</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}(f;\mathbb{E}(g)) = \mathbb{E}(f;g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span></li>
</ul>
</li>
</ul>
<p>Don't take that too seriously though, it's sort of just a guess, and I might have mis-remembered it. You probably have to consider the Markov category as enriched in measurable spaces for it to work properly.</p>
<p>One thing to note is that algebras of probability monads are not necessarily expectations, as there are algebras you can construct from partial orders that are not of that form. (See Fritz' paper on convex spaces, for example.) So if you really wanted to characterise expectations you'd have to add some extra axioms to get rid of those.</p>



<a name="281399781"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281399781" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tobias Fritz <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281399781">(May 06 2022 at 06:43)</a>:</h4>
<p>Hi! To understand your problem a little better <span class="user-mention" data-user-id="278008">@Spencer Breiner</span>, on what sort of object does your state live? Is it some version of the real line? This is the most commonly assumed case in classical probability, where distributions on the real line and their expectations (whenever they exist) play a central role.</p>
<p>So far, we haven't thought much about how to do this in Markov categories in a good way. Why not? Mainly because real-valued random variables and distributions on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> are surprisingly redundant in the foundations of probability. For example, we do have some preliminary work on the law of large numbers (see <a href="https://www.youtube.com/watch?v=Gvf3H4e7l8s">this talk</a>), and the real numbers are not involved in any way! Rather, from the categorical perspective it is more natural to work with objects of distributions, and to formulate the law as something like this: when you make repeated draws from a given distribution <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>, then the resulting empirical distribution converges to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>. The <a href="https://en.wikipedia.org/wiki/Glivenko%E2%80%93Cantelli_theorem">Glivenko-Cantelli theorem</a> is one way to make this precise. So basically, we use free algebras instead general ones, and that goes a surprisingly long way. But I think you know this already.</p>
<div class="youtube-video message_inline_image"><a data-id="Gvf3H4e7l8s" href="https://www.youtube.com/watch?v=Gvf3H4e7l8s"><img src="https://uploads.zulipusercontent.net/f4e624f9449e7a915c09be54607eac37fe36cd9e/68747470733a2f2f692e7974696d672e636f6d2f76692f47766633483465376c38732f64656661756c742e6a7067"></a></div>



<a name="281399997"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281399997" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tobias Fritz <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281399997">(May 06 2022 at 06:47)</a>:</h4>
<p>That being said, <span class="user-mention" data-user-id="276071">@Nathaniel Virgo</span>'s tentative definition of algebra looks intriguing! If something along those lines works, then it's surely an instance of some general theorem on how to encode an algebra of a monad (say with monic unit) as a structure on the Kleisli category.</p>



<a name="281400383"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281400383" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tobias Fritz <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281400383">(May 06 2022 at 06:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="276071">Nathaniel Virgo</span> <a href="#narrow/stream/253118-theory.3A-probability/topic/expectation/near/281378496">said</a>:</p>
<blockquote>
<p>One thing to note is that algebras of probability monads are not necessarily expectations, as there are algebras you can construct from partial orders that are not of that form. (See Fritz' paper on convex spaces, for example.) So if you really wanted to characterise expectations you'd have to add some extra axioms to get rid of those.</p>
</blockquote>
<p>That point I disagree with. If all you want to do is take expectations of finitely supported probability measures, then your monad is the convex combinations monad on Set, and you can take expectations in <em>all</em> of its algebras, including the weird ones! "Expectation" and "algebra map" are the same concept, and I don't see any need for further caveats.</p>
<p>Perhaps surprisingly, some of the probability monads in measure-theoretic probability do not even have any weird algebras at all. For example, the monad of Radon probability measures on compact Hausdorff spaces is exactly such that its algebras are the compact convex sets in vector spaces. (More precisely, in locally convex topological vector spaces.) This is a result <a href="https://www.fuw.edu.pl/~kostecki/scans/swirszcz1974.pdf">of Swirszcz</a>.</p>



<a name="281400740"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281400740" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tobias Fritz <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281400740">(May 06 2022 at 06:59)</a>:</h4>
<p>One more thing: although our current tentative treatment of the law of large numbers lives at the level of free algebras, I suspect that it automatically implies the analogous statement for all algebras. In case that it could help, we could share our unfinished manuscript over email.</p>



<a name="281406962"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281406962" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paolo Perrone <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281406962">(May 06 2022 at 08:13)</a>:</h4>
<p>Excellent answers here. I'd just like to point out that in <a href="https://arxiv.org/pdf/2010.07416.pdf">the paper on representable Markov categories already mentioned</a>, Section 4, there is a discussion involving algebras as "expectation", especially in the context of conditional expectation.</p>



<a name="281412304"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281412304" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Moritz Schauer <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281412304">(May 06 2022 at 09:05)</a>:</h4>
<p>One perhaps useful functional analytic characterisation of expectations is that they are positive linear functionals on test function spaces,</p>



<a name="281412865"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281412865" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathaniel Virgo <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281412865">(May 06 2022 at 09:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="276702">Tobias Fritz</span> <a href="#narrow/stream/253118-theory.3A-probability/topic/expectation/near/281400383">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="276071">Nathaniel Virgo</span> <a href="#narrow/stream/253118-theory.3A-probability/topic/expectation/near/281378496">said</a>:</p>
<blockquote>
<p>One thing to note is that algebras of probability monads are not necessarily expectations, as there are algebras you can construct from partial orders that are not of that form. (See Fritz' paper on convex spaces, for example.) So if you really wanted to characterise expectations you'd have to add some extra axioms to get rid of those.</p>
</blockquote>
<p>That point I disagree with. If all you want to do is take expectations of finitely supported probability measures, then your monad is the convex combinations monad on Set, and you can take expectations in <em>all</em> of its algebras, including the weird ones! "Expectation" and "algebra map" are the same concept, and I don't see any need for further caveats.</p>
</blockquote>
<p>This is probably a terminology thing, but here's what I meant in more detail. Consider the finitely supported distribution monad, and consider the object <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span>. There are many algebras we can put on this object. Many of them are expectations, in that they have the form <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>f</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mrow><mo fence="true">(</mo><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>p</mi><mi>i</mi></msub><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">f^{-1}\left(\sum_i p_i f(x_i)\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1138em;vertical-align:-0.2997em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span> for some invertible function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width="0.1111em"/><mo lspace="0em" rspace="0.17em"></mo><mtext> ⁣</mtext><mo lspace="0em" rspace="0em">:</mo><mspace width="0.3333em"/><mi mathvariant="double-struck">R</mi><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">f\colon \mathbb{R}\to\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace nobreak"></span><span class="mspace" style="margin-right:0.1111em;"></span><span class="mpunct"></span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mrel">:</span></span><span class="mspace" style="margin-right:0.3333em;"></span><span class="mord mathbb">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span>. But there are some that aren't, such as the one that maps <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>∈</mo><mi>P</mi><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">p\in P\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathbb">R</span></span></span></span> to the maximum of the support of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>. This seems like a limiting case of an expectation, while not being an expectation itself, at least not in the sense I'd usually use that word.</p>
<p>More generally, algebras of the distribution monad are convex spaces, and some convex spaces behave like convex subsets of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>, while others don't. Regardless of whether we use the word expectation for the ones that have this kind of property, it would be interesting to know what extra axioms are needed to rule out the "weird" ones that lack it, for general probability monads rather than just the distribution monad.</p>
<p>Of course a lot of results that apply to what I'm calling expectations will also apply to more general algebras of probability monads. But one place it might matter is in defining exponential families, because these are closely related to the notion of expectation. My hunch is that the notion of expectation will appear in their definition, and if you generalise it to a more general algebra you'll a more general class of families of distributions. But I never did quite see how to do that.</p>



<a name="281419217"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281419217" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tobias Fritz <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281419217">(May 06 2022 at 10:16)</a>:</h4>
<p>I guess my point is that I don't see <em>why</em> one wouldn't want to call the algebra map of a "weird" algebra an expectation. Mathematical terminology is often chosen in such a way that the resulting concepts have counterintuitive instances. A good guiding principle in choosing terminology is to ensure that the theorems that one wants can be proven, and in such a way that those attain reasonable generality and one does not make irrelevant assumptions. With this in mind, it could be helpful to see which interesting theorem (or construction) fails for the weird ones.</p>
<p>If the construction of exponential families works well for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> with its usual algebra structure, but gives something else for the weird (or tropical) version of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span>, then maybe this could even be a feature rather than a bug?</p>



<a name="281420210"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281420210" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tobias Fritz <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281420210">(May 06 2022 at 10:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="393086">Moritz Schauer</span> <a href="#narrow/stream/253118-theory.3A-probability/topic/expectation/near/281412304">said</a>:</p>
<blockquote>
<p>One perhaps useful functional analytic characterisation of expectations is that they are positive linear functionals on test function spaces,</p>
</blockquote>
<p>Right. In that kind of approach, one usually considers only expectations of real-valued (or complex-valued) random variables. But there are much more general cases that are of interest! For example, one may want to consider a random measure (=a measure on a space of probability measures) and form its expectation, which then again is a probability measure. Of course one can reduce this to the real-valued case; but a nice feature of categorical probability is that one acquires a more abstract picture in which one doesn't need to do such a reduction.</p>



<a name="281450057"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281450057" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Moritz Schauer <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281450057">(May 06 2022 at 14:49)</a>:</h4>
<p>Not only real random variables, but functionals of random variables. If you have an initial morphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ψ</mi></mrow><annotation encoding="application/x-tex">\psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ψ</span></span></span></span> and an "effect" <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span></span></span></span>, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ψ</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">\psi h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ψ</span><span class="mord mathnormal">h</span></span></span></span> =  "<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∫</mo><mi>h</mi><mi>d</mi><mi>ψ</mi></mrow><annotation encoding="application/x-tex">\int h d \psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1111em;vertical-align:-0.3061em;"></span><span class="mop op-symbol small-op" style="margin-right:0.19445em;position:relative;top:-0.0006em;">∫</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">ψ</span></span></span></span>" = "<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mi>f</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb E f(X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>∼</mo><mi>ψ</mi></mrow><annotation encoding="application/x-tex"> X \sim \psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ψ</span></span></span></span>"</p>



<a name="281453303"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281453303" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tobias Fritz <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281453303">(May 06 2022 at 15:12)</a>:</h4>
<p>Right. My terminology was probably a bit confusing; what I meant by "random variable" is exactly your <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span></span></span></span>. I meant to indicate that although the measures-as-functionals idea is nice, from the perspective of Markov categories it's not part of the fundamental structure of probability but more of an irrelevant implementation detail.</p>



<a name="281652425"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/253118-theory%3A%20categorical%20probability/topic/expectation/near/281652425" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Moritz Schauer <a href="https://mattecapu.github.io/ct-zulip-archive/stream/253118-theory.3A-categorical-probability/topic/expectation.html#281652425">(May 09 2022 at 08:22)</a>:</h4>
<p>Ah, makes perfect sense</p>



<footer class="site-footer">

<hr><p>Last updated: Nov 01 2025 at 12:09 UTC</p>
This archive runs on a customization of <a href="https://github.com/zulip/zulip-archive">zulip-archive</a>
</footer>
</body>

</html>