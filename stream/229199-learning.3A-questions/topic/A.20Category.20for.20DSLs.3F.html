<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  	<meta name="viewport" content="width=device-width, initial-scale=1" />
  
<link rel="stylesheet" href="https://mattecapu.github.io/ct-zulip-archive/style.css" /><title>A Category for DSLs? · learning: questions · Zulip Chat Archive</title>
</head>
<body>
<header>
<a href="https://mattecapu.github.io/ct-zulip-archive" class="home-link">
        <img class="logo" src="https://zulip-avatars.s3.amazonaws.com/21317/realm/icon.png?version=3" />
        <h1>Category Theory<br/>Zulip Server<br/>Archive</h1>
        </a>
        <p>
        You're reading the public-facing archive of the <a href="https://categorytheory.zulipchat.com/">Category Theory Zulip server</a>.<br/>
        
        To join the server you need an invite. Anybody can get an invite by contacting <a href="https://matteocapucci.wordpress.com">Matteo Capucci</a> at <em>name dot surname at gmail dot com</em>.<br/>
        
        For all things related to this archive refer to the same person.
        </p>
        </header>
        <hr />
    
<h2>Stream: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/index.html">learning: questions</a></h2>
<h3>Topic: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html">A Category for DSLs?</a></h3>

<hr>

<base href="https://categorytheory.zulipchat.com">

<a name="383739923"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/383739923" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#383739923">(Aug 10 2023 at 19:37)</a>:</h4>
<p>I've been trying to understand how the concept of a domain-specific language fits within Category Theory. More specifically, here is the situation I have.</p>
<p>Consider a set <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">P</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi></mrow><annotation encoding="application/x-tex">\mathbf{Prim}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf">Prim</span></span></span></span></span>, from which I construct a free monoid <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mrow><mi mathvariant="bold">P</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi></mrow><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[\mathbf{Prim}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathbf">Prim</span></span><span class="mclose">]</span></span></span></span>. Now, a DSL defined over this set <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">P</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi></mrow><annotation encoding="application/x-tex">\mathbf{Prim}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf">Prim</span></span></span></span></span> would be a functor (or something) such that one could manipulate values of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">P</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi></mrow><annotation encoding="application/x-tex">\mathbf{Prim}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf">Prim</span></span></span></span></span> and apply an<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo>:</mo><mi>D</mi><mi>S</mi><mi>L</mi><mrow><mi mathvariant="bold">P</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi></mrow><mo>→</mo><mo stretchy="false">[</mo><mrow><mi mathvariant="bold">P</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi></mrow><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">eval: DSL \mathbf{Prim} \to [\mathbf{Prim}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">L</span><span class="mord"><span class="mord mathbf">Prim</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathbf">Prim</span></span><span class="mclose">]</span></span></span></span>.</p>
<p>This looked very similar to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>-algebras, but the caveat is that my <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">eval</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span> function is not evaluating to the carrier, but to the free monoid over the carrier. Moreover, I'm interested in understanding if fixing the "carrier" and varying the functors (DSL?) I could define a terminal DSL, from which the other DSL could be derived. Does any of this makes any sense?</p>



<a name="383740754"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/383740754" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Arlin <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#383740754">(Aug 10 2023 at 19:42)</a>:</h4>
<p>A DSL is a kind of programming language. Do you know anything about denotational semantics of programming languages?</p>



<a name="383741719"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/383741719" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#383741719">(Aug 10 2023 at 19:47)</a>:</h4>
<p>Yeah, I know a bit about denotational semantics, mostly from functional programming. Not an expert though</p>



<a name="383756257"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/383756257" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Huntsman <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#383756257">(Aug 10 2023 at 20:53)</a>:</h4>
<p>I recall Alan Jeffrey did some _very_ interesting work on semantics and monoidal stuff in the late nineties but I don't know where to find it anymore: it was a webpage, now just a glorified citation as far as I can tell under the title "Premonoidal categories and flow graphs." Some more recent stuff in this vein is (e.g.) <a href="https://arxiv.org/abs/2202.02061">https://arxiv.org/abs/2202.02061</a></p>



<a name="388397245"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/388397245" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#388397245">(Aug 31 2023 at 20:00)</a>:</h4>
<p><span class="user-mention" data-user-id="498398">@Davi Sales Barreira</span> Could you give an example of such a DSL you're interested in?</p>



<a name="388795359"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/388795359" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jencel Panic <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#388795359">(Sep 03 2023 at 08:04)</a>:</h4>
<p>Primer on F-algebras: <a href="https://www.schoolofhaskell.com/user/bartosz/understanding-algebras">https://www.schoolofhaskell.com/user/bartosz/understanding-algebras</a></p>
<p><span class="user-mention" data-user-id="498398">@Davi Sales Barreira</span>, why did you choose the free monoid datastructure? Structures like lists are often the basis of the DSL, not the result.</p>



<a name="388971497"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/388971497" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#388971497">(Sep 04 2023 at 11:45)</a>:</h4>
<p>What I'm trying to understand is the following.  I have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">P</mi><mi mathvariant="bold">r</mi><mi mathvariant="bold">i</mi><mi mathvariant="bold">m</mi></mrow><annotation encoding="application/x-tex">\mathbf{Prim}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf">Prim</span></span></span></span></span> which is a collection of primitives. To describe complex objects, I want to generate collections of primitive. For example, in my case, I have primitives which are basic geometric objects which I use to describe a scene. Thus, a complex scene is just a collection of these basic geometric objects, i.e. an element of the free monoid over primitives. The thing is, how do I then construct these collections? Here is where a DSL comes in. The DSL incremenets some syntax/operations that I can use over my primitives in order to more "easily" create this scene. For example, a DSL can give a tree-like structure, which could then be flattened into a list of primitives. Before flattening, I have an expression in the DSL. Makes sense?</p>
<p>What I'm therefore trying to understand is if this notion of a DSL has a categorical analogue.</p>



<a name="389009720"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389009720" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jencel Panic <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389009720">(Sep 04 2023 at 15:00)</a>:</h4>
<p>I think that this will be an F-algebra with  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[Prim]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span><span class="mclose">]</span></span></span></span> as a carrier.</p>



<a name="389025634"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389025634" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389025634">(Sep 04 2023 at 16:36)</a>:</h4>
<p><span class="user-mention" data-user-id="612694">@Jencel Panic</span> , in fact, if we consider the "DSL" over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[Prim]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span><span class="mclose">]</span></span></span></span> so that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>v</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mi>D</mi><mi>S</mi><mi>L</mi><mo stretchy="false">[</mo><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo>−</mo><mo>&gt;</mo><mo stretchy="false">[</mo><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">eval(DSL [Prim]) -&gt; [Prim]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">L</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span><span class="mclose">])</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span><span class="mclose">]</span></span></span></span>, than that would be an algebra... But using <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[Prim]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span><span class="mclose">]</span></span></span></span> as the carrier is not so natural. It is more natural to think of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>S</mi><mi>L</mi></mrow><annotation encoding="application/x-tex">DSL</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">L</span></span></span></span> over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">Prim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span></span></span></span>.</p>



<a name="389025663"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389025663" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389025663">(Sep 04 2023 at 16:36)</a>:</h4>
<p>Hence why the more "natural" construction is not directly an F-Algebra.</p>



<a name="389025786"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389025786" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389025786">(Sep 04 2023 at 16:37)</a>:</h4>
<p>But perhaps there is some isomorphism hidden somewhere, and we can use <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>S</mi><mi>L</mi></mrow><annotation encoding="application/x-tex">DSL</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">L</span></span></span></span> over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[Prim]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span><span class="mclose">]</span></span></span></span> and there is some natural extension to a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">D Prim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span></span></span></span>.</p>



<a name="389034598"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389034598" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389034598">(Sep 04 2023 at 17:59)</a>:</h4>
<p><span class="user-mention" data-user-id="498398">@Davi Sales Barreira</span> Based on your example, I'm wondering if the free commutative monoid would be better for your application than the free monoid. Free commutative monoids capture the idea of "finite collection with multiplicity and without order", while free monoids capture the idea of "finite collection with multiplicity and with order". Perhaps the former makes more sense in this case?</p>



<a name="389034823"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389034823" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389034823">(Sep 04 2023 at 18:01)</a>:</h4>
<p>Anyway, what you're describing sounds vaguely like a morphism of monads. I'm far from an expert on monads, so take everything I say with a grain of salt. But if you had some monad <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> capturing some tree-like structure encoding the abstract syntax of your language, then I would expect there to be a monad morphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>⇒</mo><mi>M</mi></mrow><annotation encoding="application/x-tex">T \Rightarrow M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>, where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> is the free (commutative) monoid functor. This is the "flattening" operation you described. (I know this can be done in simple cases, such as flattening binary trees to lists. What you want might be a bit more complicated.)</p>



<a name="389034981"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389034981" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389034981">(Sep 04 2023 at 18:03)</a>:</h4>
<p>So, if you're willing to make your syntax as simple as, "a scene consists of either A) a primitive, or B) a pair of scenes", then that would be represented by a monad morphism as I described above.</p>



<a name="389035152"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389035152" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389035152">(Sep 04 2023 at 18:04)</a>:</h4>
<p>In that simple case, I believe the DSL over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">Prim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span></span></span></span> would be the free algebra of the endofunctor <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>↦</mo><msup><mi>X</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">X \mapsto X^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6943em;vertical-align:-0.011em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">Prim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span></span></span></span>, and it would indeed come with a canonical map to the free (commutative) monoid generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">Prim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span></span></span></span>.</p>



<a name="389035571"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389035571" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389035571">(Sep 04 2023 at 18:09)</a>:</h4>
<p>If you want more complicated syntax, the endofunctor you would choose would change in ways that I'd be happy to elaborate on if you'd like more detail.</p>



<a name="389035782"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389035782" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389035782">(Sep 04 2023 at 18:11)</a>:</h4>
<p>One thing to keep in mind, though, is that the actual language is probably more complicated than the simple version you're describing. I'm guessing that you have some primitives such as "translate", "rotate", "reflect", and "dilate" that are involved as well. In order to have a full account of what you're doing, you would need to take those into account as well.</p>



<a name="389168556"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389168556" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389168556">(Sep 05 2023 at 11:37)</a>:</h4>
<p><span class="user-mention" data-user-id="599004">@Ben Logsdon</span> , thanks for the answer. I actually want non-commutative, as the order is the order of the rendering of the objects.</p>



<a name="389169236"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389169236" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389169236">(Sep 05 2023 at 11:42)</a>:</h4>
<p>If I understood you, the idea is that we have free algebras over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>r</mi><mi>i</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">Prim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">im</span></span></span></span>, and there is a canonical way to go to the free monoid... Is that it?</p>



<a name="389169437"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/389169437" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davi Sales Barreira <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#389169437">(Sep 05 2023 at 11:43)</a>:</h4>
<p>Since you said I needed monads, would it be Free Monad?</p>



<a name="391744355"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/391744355" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Huntsman <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#391744355">(Sep 18 2023 at 17:18)</a>:</h4>
<p>I just noticed <a href="https://arxiv.org/abs/2302.00744">https://arxiv.org/abs/2302.00744</a></p>



<a name="395964883"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/A%20Category%20for%20DSLs%3F/near/395964883" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Logsdon <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/A.20Category.20for.20DSLs.3F.html#395964883">(Oct 10 2023 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="498398">@Davi Sales Barreira</span> sorry for the delay...I've been buried in teaching recently, so I'm just now coming back to this!</p>
<p>Yes, it sounds like you understood what I said correctly. The monad which generates free monoids is called the "free monoid monad", because the monad takes as an input an object <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> and returns the free monoid generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>. And the key operation I think you're looking for is a natural transformation (i.e. a monad morphism) from some other monad <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> to the free monoid monad.</p>
<p>And yes, what you said about the non-commutativity makes sense :)</p>



<footer class="site-footer">

<hr><p>Last updated: Feb 28 2026 at 12:12 UTC</p>
This archive runs on a customization of <a href="https://github.com/zulip/zulip-archive">zulip-archive</a>
</footer>
</body>

</html>