<!DOCTYPE html>
<html>
<head>
  	<meta charset="utf-8" />
  	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  	<meta name="viewport" content="width=device-width, initial-scale=1" />
  
<link rel="stylesheet" href="https://mattecapu.github.io/ct-zulip-archive/style.css" /><title>How to use Lean better · learning: questions · Zulip Chat Archive</title>
</head>
<body>
<header>
<a href="https://mattecapu.github.io/ct-zulip-archive" class="home-link">
        <img class="logo" src="https://zulip-avatars.s3.amazonaws.com/21317/realm/icon.png?version=3" />
        <h1>Category Theory<br/>Zulip Server<br/>Archive</h1>
        </a>
        <p>
        You're reading the public-facing archive of the <a href="https://categorytheory.zulipchat.com/">Category Theory Zulip server</a>.<br/>
        
        To join the server you need an invite. Anybody can get an invite by contacting <a href="https://matteocapucci.wordpress.com">Matteo Capucci</a> at <em>name dot surname at gmail dot com</em>.<br/>
        
        For all things related to this archive refer to the same person.
        </p>
        </header>
        <hr />
    
<h2>Stream: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/index.html">learning: questions</a></h2>
<h3>Topic: <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html">How to use Lean better</a></h3>

<hr>

<base href="https://categorytheory.zulipchat.com">

<a name="546511563"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546511563" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elisha Goldman <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546511563">(Oct 22 2025 at 17:17)</a>:</h4>
<p>Whenever I use Lean, my code always ends up swamped in bookkeeping because the compiler raises errors like <code>Expected type X but received type (X, X).fst</code>, even though my code in actual programming languages doesn't really have this issue. Are there bad habits I'm falling into unknowingly, or do other theorem provers make this easier?</p>



<a name="546514368"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546514368" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathanael Arkor <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546514368">(Oct 22 2025 at 17:32)</a>:</h4>
<p>I imagine you will have more success asking this kind of question on <a href="https://leanprover.zulipchat.com/">https://leanprover.zulipchat.com/</a>.</p>



<a name="546519445"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546519445" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Corbyn <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546519445">(Oct 22 2025 at 18:00)</a>:</h4>
<p>In my experience it’s a very active Zulip and a very welcoming community</p>



<a name="546562598"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546562598" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Wisnesky <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546562598">(Oct 22 2025 at 22:48)</a>:</h4>
<p>That's a peculiar error in any dependent type theory; one would expect X and (X,X).fst to be convertible in any context by the beta rule for products</p>



<a name="546563240"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546563240" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Deikun <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546563240">(Oct 22 2025 at 22:54)</a>:</h4>
<p>Lean may be like Rocq and hold off applying the conversion rule until explicitly asked.</p>



<a name="546567124"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546567124" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elisha Goldman <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546567124">(Oct 22 2025 at 23:35)</a>:</h4>
<p>I think James is probably right, those errors only occur when it needs to implicitly convert while doing something else, and writing <code>by simp</code> fixes them 99% of the time, it's just that rewriting so much code to fit <code>by simp</code> in is not ideal</p>



<a name="546635103"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546635103" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josselin Poiret <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546635103">(Oct 23 2025 at 09:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="438995">James Deikun</span> <a href="#narrow/channel/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better/near/546563240">said</a>:</p>
<blockquote>
<p>Lean may be like Rocq and hold off applying the conversion rule until explicitly asked.</p>
</blockquote>
<p>Rocq does not do what you describe: if two things are convertible (such as <code>x</code> and <code>(x, y).fst</code>), the kernel will always find that these are convertible. The typechecking and conversion algorithms are <em>not</em> interactive in Rocq (and that's the same in Lean).</p>



<a name="546635467"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546635467" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josselin Poiret <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546635467">(Oct 23 2025 at 09:46)</a>:</h4>
<p>one difference is that Lean's conversion is in general undecidable, so that the implemented algorithm may sometimes fail to see that two things are convertible, but I don't think a simple problem such as <code>X ≡ (X, X).fst</code> would fail</p>



<a name="546773399"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546773399" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Shulman <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546773399">(Oct 23 2025 at 21:44)</a>:</h4>
<p>However, one "gotcha" in Rocq is that not everything happens "up to convertibility", such as typeclass inference.  If two types are convertible, it doesn't follow that a typeclass instance belonging to one of them will necessarily be found when searching based on the other.  I don't know if Lean also has this issue.</p>



<a name="546846775"></a>
<h4><a href="https://categorytheory.zulipchat.com#narrow/stream/229199-learning%3A%20questions/topic/How%20to%20use%20Lean%20better/near/546846775" class="zl"><img src="https://mattecapu.github.io/ct-zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josselin Poiret <a href="https://mattecapu.github.io/ct-zulip-archive/stream/229199-learning.3A-questions/topic/How.20to.20use.20Lean.20better.html#546846775">(Oct 24 2025 at 09:05)</a>:</h4>
<p>same for tactics: lots of them will only be up to syntactic equality, not conversion. These are all part of the higher layers of Rocq that build terms for the kernel though, so you will never get a complaint from the kernel saying that two specific things are not convertible, only that some tactic or typeclass search failed.</p>



<footer class="site-footer">

<hr><p>Last updated: Feb 28 2026 at 12:12 UTC</p>
This archive runs on a customization of <a href="https://github.com/zulip/zulip-archive">zulip-archive</a>
</footer>
</body>

</html>