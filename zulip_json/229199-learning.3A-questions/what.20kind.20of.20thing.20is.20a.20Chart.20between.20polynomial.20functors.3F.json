[
    {
        "content": "<p>I'm working on a formalization of Poly for my master's thesis with agda-categories and cubical agda and decided to write a little isomorphism from polynomials to functors and lenses to natural transformations, which are both pretty trivial but then I thought... is a chart also a NT? it is a map between functors after all... But it seems like it's not. So what kind of thing are charts? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span> </p>\n<div class=\"codehilite\" data-code-language=\"Agda\"><pre><span></span><code><span class=\"nf\">F-resp</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>p<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>A<span class=\"w\"> </span>B<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"kt\">Set</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>f<span class=\"w\"> </span>g<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>A<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>B<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>x<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>p<span class=\"w\"> </span>⦅<span class=\"w\"> </span>A<span class=\"w\"> </span>⦆<span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>f<span class=\"w\"> </span>≡<span class=\"w\"> </span>g<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>applyFn<span class=\"w\"> </span>p<span class=\"w\"> </span>f<span class=\"w\"> </span>x<span class=\"w\"> </span>≡<span class=\"w\"> </span>applyFn<span class=\"w\"> </span>p<span class=\"w\"> </span>g<span class=\"w\"> </span>x<span class=\"w\"> </span><span class=\"c1\">--</span>\nF-resp<span class=\"w\"> </span><span class=\"o\">{</span>x<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span>posApp<span class=\"w\"> </span>,<span class=\"w\"> </span>dirApp<span class=\"o\">}</span><span class=\"w\"> </span>pr<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>i<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>posApp<span class=\"w\"> </span>,<span class=\"w\"> </span><span class=\"o\">(</span>pr<span class=\"w\"> </span>i<span class=\"o\">)</span><span class=\"w\"> </span>∘<span class=\"w\">  </span>dirApp\n\n<span class=\"nf\">conv</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>A<span class=\"w\"> </span>B<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"kt\">Set</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>f<span class=\"w\"> </span>g<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>A<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>B<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span><span class=\"o\">({</span>x<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>A<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>f<span class=\"w\"> </span>x<span class=\"w\"> </span>≡p<span class=\"w\"> </span>g<span class=\"w\"> </span>x<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>f<span class=\"w\"> </span>≡<span class=\"w\"> </span>g\nconv<span class=\"w\"> </span>p<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span>funExt<span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>x<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>ptoc<span class=\"w\"> </span>$<span class=\"w\"> </span>p\n\n<span class=\"nf\">asEndo</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">(</span>p<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Functor<span class=\"w\"> </span><span class=\"o\">(</span>Sets<span class=\"w\"> </span>zero<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span>Sets<span class=\"w\"> </span>zero<span class=\"o\">)</span>\nasEndo<span class=\"w\"> </span>p<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"kr\">record</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"w\"> </span>F₀<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>x<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>p<span class=\"w\"> </span>⦅<span class=\"w\"> </span>x<span class=\"w\"> </span>⦆\n<span class=\"w\">    </span>;<span class=\"w\"> </span>F₁<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>f<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>applyFn<span class=\"w\"> </span>p<span class=\"w\"> </span>f\n<span class=\"w\">    </span>;<span class=\"w\"> </span>identity<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span>Eq.refl\n<span class=\"w\">    </span>;<span class=\"w\"> </span>homomorphism<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span>Eq.refl\n<span class=\"w\">    </span>;<span class=\"w\"> </span>F-resp-≈<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span><span class=\"o\">{</span>_<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>_<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>f<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>g<span class=\"o\">}</span><span class=\"w\"> </span>proof<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>ctop<span class=\"w\"> </span><span class=\"o\">(</span>F-resp<span class=\"w\"> </span><span class=\"o\">{</span>f<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span>f<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span>g<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span>g<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span>conv<span class=\"w\"> </span>proof<span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"o\">}</span>\n\n<span class=\"nf\">asNatTransArr</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>p<span class=\"w\"> </span>q<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Lens<span class=\"w\"> </span>p<span class=\"w\"> </span>q<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>NaturalTransformation<span class=\"w\"> </span><span class=\"o\">(</span>asEndo<span class=\"w\"> </span>p<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span>asEndo<span class=\"w\"> </span>q<span class=\"o\">)</span>\nasNatTransArr<span class=\"w\"> </span><span class=\"o\">(</span>f<span class=\"w\"> </span>⇆<span class=\"w\"> </span>f♯<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"kr\">record</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span>η<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span>X<span class=\"w\"> </span><span class=\"o\">(</span>posP<span class=\"w\"> </span>,<span class=\"w\"> </span>dirP<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>f<span class=\"w\"> </span>posP<span class=\"w\"> </span>,<span class=\"w\"> </span>dirP<span class=\"w\"> </span>∘<span class=\"w\"> </span>f♯<span class=\"w\"> </span>posP<span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span>;\n<span class=\"w\">    </span>commute<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>f₁<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Eq.refl<span class=\"w\"> </span>;\n<span class=\"w\">    </span>sym-commute<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>f₁<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Eq.refl\n<span class=\"w\">    </span><span class=\"o\">}</span>\n\n<span class=\"nf\">asNatTransChart</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>p<span class=\"w\"> </span>q<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Chart<span class=\"w\"> </span>p<span class=\"w\"> </span>q<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>NaturalTransformation<span class=\"w\"> </span><span class=\"o\">(</span>asEndo<span class=\"w\"> </span>p<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span>asEndo<span class=\"w\"> </span>q<span class=\"o\">)</span>\nasNatTransChart<span class=\"w\"> </span><span class=\"o\">(</span>f<span class=\"w\"> </span>⇉<span class=\"w\"> </span>f♭<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"kr\">record</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span>η<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span>X<span class=\"w\"> </span><span class=\"o\">(</span>posP<span class=\"w\"> </span>,<span class=\"w\"> </span>dirP<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span><span class=\"c c-Directive\">{!   !}</span><span class=\"o\">}</span><span class=\"w\"> </span>;\n<span class=\"w\">    </span>commute<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"c c-Directive\">{!   !}</span><span class=\"w\"> </span>;\n<span class=\"w\">    </span>sym-commute<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"c c-Directive\">{!   !}</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 352231820,
        "sender_full_name": "André Muricy Santos",
        "timestamp": 1682332621
    },
    {
        "content": "<p>This is a very good question, and I'd like to know the answer too... I'd bet nobody knows</p>",
        "id": 352233468,
        "sender_full_name": "Jules Hedges",
        "timestamp": 1682333064
    },
    {
        "content": "<p>What is (the definition of) a chart between polynomial functors?</p>",
        "id": 352233549,
        "sender_full_name": "Morgan Rogers (he/him)",
        "timestamp": 1682333091
    },
    {
        "content": "<p>I think the \"chart\" terminology exists exclusively in the categorical systems theory book by David Jaz Myers (which itself is pretty hard to find, it's only on Github)</p>",
        "id": 352233698,
        "sender_full_name": "Jules Hedges",
        "timestamp": 1682333130
    },
    {
        "content": "<p>It means a morphism in the fibrewise opposite of categories of lenses, ie. \"like a lens except the backwards pass also goes forwards\"</p>",
        "id": 352233841,
        "sender_full_name": "Jules Hedges",
        "timestamp": 1682333168
    },
    {
        "content": "<p>There's the isomorphism of categories <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"bold\">P</mi><mi mathvariant=\"bold\">o</mi><mi mathvariant=\"bold\">l</mi><mi mathvariant=\"bold\">y</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"script\">C</mi><mo stretchy=\"false\">)</mo><mo>≅</mo><msub><mo>∫</mo><mrow><mi>X</mi><mo>:</mo><mi mathvariant=\"script\">C</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"script\">C</mi><mi mathvariant=\"normal\">/</mi><mi>X</mi><msup><mo stretchy=\"false\">)</mo><mrow><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">p</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbf{Poly} (\\mathcal C) \\cong \\int_{X : \\mathcal C} (\\mathcal C / X)^\\mathrm{op}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">Poly</span></span><span class=\"mopen\">(</span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≅</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1608em;vertical-align:-0.3558em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1225em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"mrel mtight\">:</span><span class=\"mord mathcal mtight\" style=\"margin-right:0.05834em;\">C</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">op</span></span></span></span></span></span></span></span></span></span></span></span>, so the question is, what happens if you remove the op from the right hand side</p>",
        "id": 352233984,
        "sender_full_name": "Jules Hedges",
        "timestamp": 1682333213
    },
    {
        "content": "<p>Since objects can still be seen as polynomial functors, the answer is that it's <em>some</em> kind of morphism between polynomial functors that's different to natural transformations</p>",
        "id": 352234243,
        "sender_full_name": "Jules Hedges",
        "timestamp": 1682333297
    },
    {
        "content": "<p>I've only seen DJM talk about charts too, but the CSS book doesn't go into what kind of categorical thing it is. The definition is this:</p>\n<div class=\"codehilite\" data-code-language=\"Agda\"><pre><span></span><code><span class=\"kr\">record</span><span class=\"w\"> </span>Chart<span class=\"w\"> </span><span class=\"o\">(</span>p<span class=\"w\"> </span>q<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"kt\">Set</span><span class=\"w\"> </span><span class=\"kr\">where</span>\n<span class=\"w\">    </span><span class=\"kr\">constructor</span><span class=\"w\"> </span>_⇉_\n<span class=\"w\">    </span><span class=\"kr\">field</span>\n<span class=\"w\">        </span><span class=\"nf\">mapPos</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>position<span class=\"w\"> </span>p<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>position<span class=\"w\"> </span>q\n<span class=\"w\">        </span><span class=\"nf\">mapDir</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">(</span>i<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>position<span class=\"w\"> </span>p<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>direction<span class=\"w\"> </span>p<span class=\"w\"> </span>i<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>direction<span class=\"w\"> </span>q<span class=\"w\"> </span><span class=\"o\">(</span>mapPos<span class=\"w\"> </span>i<span class=\"o\">)</span>\n\n<span class=\"nf\">∘c</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>p<span class=\"w\"> </span>q<span class=\"w\"> </span>r<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Chart<span class=\"w\"> </span>q<span class=\"w\"> </span>r<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Chart<span class=\"w\"> </span>p<span class=\"w\"> </span>q<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Chart<span class=\"w\"> </span>p<span class=\"w\"> </span>r\n∘c<span class=\"w\"> </span><span class=\"o\">(</span>f<span class=\"w\"> </span>⇉<span class=\"w\"> </span>f♭<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span>g<span class=\"w\"> </span>⇉<span class=\"w\"> </span>g♭<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span><span class=\"o\">(</span>f<span class=\"w\"> </span>∘<span class=\"w\"> </span>g<span class=\"o\">)</span><span class=\"w\"> </span>⇉<span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>i<span class=\"w\"> </span>x<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>f♭<span class=\"w\"> </span><span class=\"o\">(</span>g<span class=\"w\"> </span>i<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span>g♭<span class=\"w\"> </span>i<span class=\"w\"> </span>x<span class=\"o\">)</span>\n\n<span class=\"nf\">idChart</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>p<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">}</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>Chart<span class=\"w\"> </span>p<span class=\"w\"> </span>p\nidChart<span class=\"w\"> </span><span class=\"ow\">=</span><span class=\"w\"> </span>id<span class=\"w\"> </span>⇉<span class=\"w\"> </span><span class=\"ow\">λ</span><span class=\"w\"> </span>_<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>id\n</code></pre></div>\n<p>defs for Poly and Lens for completeness:</p>\n<div class=\"codehilite\" data-code-language=\"Agda\"><pre><span></span><code><span class=\"kr\">record</span><span class=\"w\"> </span>Polynomial<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"kt\">Set₁</span><span class=\"w\"> </span><span class=\"kr\">where</span>\n<span class=\"w\">    </span><span class=\"kr\">constructor</span><span class=\"w\"> </span>mkpoly\n<span class=\"w\">    </span><span class=\"kr\">field</span>\n<span class=\"w\">        </span><span class=\"nf\">position</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"kt\">Set</span>\n<span class=\"w\">        </span><span class=\"nf\">direction</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>position<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span><span class=\"kt\">Set</span>\n<span class=\"kr\">open</span><span class=\"w\"> </span>Polynomial<span class=\"w\"> </span>public\n\n<span class=\"kr\">record</span><span class=\"w\"> </span>Lens<span class=\"w\"> </span><span class=\"o\">(</span>from<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>Polynomial<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"kt\">Set</span><span class=\"w\"> </span><span class=\"kr\">where</span>\n<span class=\"w\">    </span><span class=\"kr\">constructor</span><span class=\"w\"> </span>_⇆_\n<span class=\"w\">    </span><span class=\"kr\">open</span><span class=\"w\"> </span>Polynomial\n<span class=\"w\">    </span><span class=\"kr\">field</span>\n<span class=\"w\">        </span><span class=\"nf\">mapPosition</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>position<span class=\"w\"> </span>from<span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>position<span class=\"w\"> </span>to\n<span class=\"w\">        </span><span class=\"nf\">mapDirection</span><span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span><span class=\"o\">(</span>fromPos<span class=\"w\"> </span><span class=\"ow\">:</span><span class=\"w\"> </span>position<span class=\"w\"> </span>from<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>direction<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"o\">(</span>mapPosition<span class=\"w\"> </span>fromPos<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"ow\">→</span><span class=\"w\"> </span>direction<span class=\"w\"> </span>from<span class=\"w\"> </span>fromPos\n<span class=\"kr\">open</span><span class=\"w\"> </span>Lens<span class=\"w\"> </span>public\n</code></pre></div>",
        "id": 352234658,
        "sender_full_name": "André Muricy Santos",
        "timestamp": 1682333419
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275901\">Jules Hedges</span> <a href=\"#narrow/stream/229199-learning.3A-questions/topic/what.20kind.20of.20thing.20is.20a.20Chart.20between.20polynomial.20functors.3F/near/352233984\">said</a>:</p>\n<blockquote>\n<p>There's the isomorphism of categories <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"bold\">P</mi><mi mathvariant=\"bold\">o</mi><mi mathvariant=\"bold\">l</mi><mi mathvariant=\"bold\">y</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"script\">C</mi><mo stretchy=\"false\">)</mo><mo>≅</mo><msub><mo>∫</mo><mrow><mi>X</mi><mo>:</mo><mi mathvariant=\"script\">C</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"script\">C</mi><mi mathvariant=\"normal\">/</mi><mi>X</mi><msup><mo stretchy=\"false\">)</mo><mrow><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">p</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbf{Poly} (\\mathcal C) \\cong \\int_{X : \\mathcal C} (\\mathcal C / X)^\\mathrm{op}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbf\" style=\"margin-right:0.01597em;\">Poly</span></span><span class=\"mopen\">(</span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≅</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1608em;vertical-align:-0.3558em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1225em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"mrel mtight\">:</span><span class=\"mord mathcal mtight\" style=\"margin-right:0.05834em;\">C</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">op</span></span></span></span></span></span></span></span></span></span></span></span>, so the question is, what happens if you remove the op from the right hand side</p>\n</blockquote>\n<p>Jules, what do the symbols on the right mean? I recognize the integral as an indexed category except the X:C would be on top. and then C / X is slice?</p>",
        "id": 352235392,
        "sender_full_name": "André Muricy Santos",
        "timestamp": 1682333603
    },
    {
        "content": "<p>Yes, this is the Grothendieck construction of the indexed category given by the opposite of slice categories</p>",
        "id": 352236184,
        "sender_full_name": "Jules Hedges",
        "timestamp": 1682333805
    },
    {
        "content": "<p>Is this answer wrong, too trivial, or otherwise unwanted?<br>\nA polynomial functor is an object of the arrow category of Set; a chart is a morphism of that category.</p>",
        "id": 352241412,
        "sender_full_name": "Reid Barton",
        "timestamp": 1682335152
    },
    {
        "content": "<p>I'm just looking at the Agda definition and substituting the names <code>Polynomial</code> -&gt; family, <code>position</code> -&gt; base, <code>direction</code> -&gt; fiber, etc.</p>",
        "id": 352241758,
        "sender_full_name": "Reid Barton",
        "timestamp": 1682335260
    },
    {
        "content": "<p>I don't know much about arrow categories, but don't the morphisms correspond to natural transformations? they'd be lenses in that case. i'm reasonably confident charts are not natural transformations.</p>",
        "id": 352242084,
        "sender_full_name": "André Muricy Santos",
        "timestamp": 1682335337
    },
    {
        "content": "<p>I'm ignoring everything associated with the phrase \"polynomial functor\" and instead building the map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">E \\to B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> of sets where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is <code>position</code> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span> is the sigma type of <code>direction</code>, together with its projection to the first component <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span>.</p>",
        "id": 352242564,
        "sender_full_name": "Reid Barton",
        "timestamp": 1682335471
    },
    {
        "content": "<p>Then in <code>Chart</code> I see if we have two of these <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">E \\to B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>→</mo><msup><mi>B</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">E&#x27; \\to B&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> then we ask for a map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi>B</mi><mo>→</mo><msup><mi>B</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">f : B \\to B&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> together with, for each <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi><mo>∈</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">b \\in B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> and element of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">E_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, an element of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E&#x27;_{f(b)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2489em;vertical-align:-0.497em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-2.378em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">b</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.497em;\"><span></span></span></span></span></span></span></span></span></span>; those assemble into a map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo>:</mo><mi>E</mi><mo>→</mo><msup><mi>E</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">g : E \\to E&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> lying over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>, i.e., a commutative square. (Or indeed a natural transformation of diagrams from the category <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∙</mo><mo>→</mo><mo>∙</mo></mrow><annotation encoding=\"application/x-tex\">\\bullet \\to \\bullet</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">∙</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">∙</span></span></span></span> to Set.)</p>",
        "id": 352242870,
        "sender_full_name": "Reid Barton",
        "timestamp": 1682335551
    },
    {
        "content": "<p>I assume this is somehow missing the point of the original question, because it doesn't have any direct relationship to the actual polynomial functor associated to the data <code>Polynomial</code>.</p>",
        "id": 352243327,
        "sender_full_name": "Reid Barton",
        "timestamp": 1682335674
    }
]