[
    {
        "content": "<p>Hello,</p>\n<p>For my research in Applied Category Theory for AI, I will need to understand Monads.</p>\n<p>I am a newcomer and my background in CT is Leinster's Basic Category Theory. What would be a good book that introduces Monads?</p>\n<p>Thank you</p>",
        "id": 496632537,
        "sender_full_name": "Pierre R",
        "timestamp": 1738180489
    },
    {
        "content": "<p>What is your mathematical background like? Books like Mac Lane's \"Categories for the Working Mathematician\" and Riehl's \"Category Theory in Context\" are aimed at people who know a bit of abstract algebra and topology. For that audience, they're great.</p>",
        "id": 496641458,
        "sender_full_name": "Joe Moeller",
        "timestamp": 1738184067
    },
    {
        "content": "<p>What are you using monads for? Is it probability?</p>\n<p>In my work I've often needed monads, <a href=\"https://ncatlab.org/nlab/show/monads+of+probability%2C+measures%2C+and+valuations\">mostly to model probability</a>. In the past few years this led me to produce introductory material on monads with this motivation and background in mind. In particular:</p>\n<ul>\n<li>I wrote <a href=\"https://arxiv.org/abs/1912.10642\">these lecture notes</a> (see section 5 for monads), which later became <a href=\"https://www.worldscientific.com/worldscibooks/10.1142/13670#t=aboutBook\">this book</a> (see chapter 5 for monads and sections 6.4 and 6.5 for strong monads etc.)</li>\n<li>I made <a href=\"https://www.youtube.com/watch?v=ryMkvAOJk20&amp;list=PLCOXjXDLt3pYPE63bVbsVfA41_wa3sZOh\">this tutorial video</a> for ACT 2020 on monads and comonads, and <a href=\"https://vimeo.com/506304427\">this tutorial video</a> for ACT4E 2020.<div class=\"youtube-video message_inline_image\"><a data-id=\"ryMkvAOJk20\" href=\"https://www.youtube.com/watch?v=ryMkvAOJk20&amp;list=PLCOXjXDLt3pYPE63bVbsVfA41_wa3sZOh\"><img src=\"https://uploads.zulipusercontent.net/896f5b74d8a76ee9bf735763ed847499ac1159a6/68747470733a2f2f692e7974696d672e636f6d2f76692f72794d6b76414f4a6b32302f64656661756c742e6a7067\"></a></div></li>\n</ul>\n<p>I hope this helps!</p>",
        "id": 496643506,
        "sender_full_name": "Paolo Perrone",
        "timestamp": 1738184922
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275914\">Joe Moeller</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/496641458\">said</a>:</p>\n<blockquote>\n<p>What is your mathematical background like? Books like Mac Lane's \"Categories for the Working Mathematician\" and Riehl's \"Category Theory in Context\" are aimed at people who know a bit of abstract algebra and topology. For that audience, they're great.</p>\n</blockquote>\n<p>Hello <span class=\"user-mention\" data-user-id=\"275914\">@Joe Moeller</span>, I am a computer scientist. But I am in my second year of a Master's in Mathematics. I think that I have a good algebra background. My topology background is the one needed for analysis, mostly.</p>",
        "id": 496787062,
        "sender_full_name": "Pierre R",
        "timestamp": 1738246528
    },
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"275989\">@Paolo Perrone</span> </p>\n<p>Part of my thesis work is to understand and work through the details of <a href=\"https://arxiv.org/abs/2402.15332\">Position: Categorical Deep Learning is an Algebraic Theory of All Architectures</a>. There, the authors use Monads and Algebra of Monads to generalize <a href=\"https://arxiv.org/abs/2104.13478\">Geometric Deep Learning</a>.</p>\n<p>Additionally, thank you very much for your suggestions. I will try to obtain your book through my university library.</p>\n<p>Moreover, I am intrigued by your work. I will take a look at it.</p>\n<p>Thank you.</p>",
        "id": 496792129,
        "sender_full_name": "Pierre R",
        "timestamp": 1738247809
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"867930\">@Pierre R</span> Monads can be understood from many different points of view, each of which I think gives a different view. Monads arise in homological algebra, universal algebra and the theory of programming languages, for different reasons.</p>",
        "id": 497033528,
        "sender_full_name": "Patrick Nicodemus",
        "timestamp": 1738337822
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"424412\">Patrick Nicodemus</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/497033528\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"867930\">Pierre R</span> Monads can be understood from many different points of view, each of which I think gives a different view. Monads arise in homological algebra, universal algebra and the theory of programming languages, for different reasons.</p>\n</blockquote>\n<p>Thank you Patrick for the insight!</p>",
        "id": 497081314,
        "sender_full_name": "Pierre R",
        "timestamp": 1738354590
    },
    {
        "content": "<p>You may be interested in the wiki page <a href=\"https://ncatlab.org/nlab/show/monad+%28in+computer+science%29\">Monad (in Computer Science)</a> on nLab.</p>\n<p>I think the book <a href=\"https://www.math.mcgill.ca/barr/papers/ctcs.pdf\">Category Theory for Computing Science</a> by Michael Barr and Charles Wells may be helpful as well, particularly Chapter 14 Section 3, \"Triple\" (another name of monad).</p>\n<p>Finally there is a long series about monad on <a href=\"https://stringdiagram.com\">https://stringdiagram.com</a>.</p>",
        "id": 497244094,
        "sender_full_name": "Qin Yuxuan",
        "timestamp": 1738489623
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"772024\">@Qin Yuxuan</span>, thank you! Great resources!</p>",
        "id": 498424999,
        "sender_full_name": "Pierre R",
        "timestamp": 1738961674
    },
    {
        "content": "<p>Hi Pierre, </p>\n<p>You might also want to look at Bartosz Milewski's <a href=\"https://bartoszmilewski.com/2014/10/28/category-theory-for-programmers-the-preface/\">Category Theory for Computer Programmers</a> (the monads part starts here: <a href=\"https://bartoszmilewski.com/2016/11/21/monads-programmers-definition/\">https://bartoszmilewski.com/2016/11/21/monads-programmers-definition/</a>).</p>\n<p>Best,<br>\nJR</p>",
        "id": 499428852,
        "sender_full_name": "JR Learnstomath",
        "timestamp": 1739440842
    },
    {
        "content": "<p>I've also got a solid grip on Leinster's book, and am currently using Mac Lane, nLab, and \"monad tutorials\" one commonly finds online.</p>\n<p>One problem I'm having with monads is that I \"get\" the explanation given in Mac Lane,  but have a lot of trouble convincing myself why they're the same as what I encounter in these monad tutorials.</p>\n<p>That's when I ran across <em><a href=\"https://arxiv.org/abs/1803.10195\">What we talk about when we talk about monads</a></em> which was pretty helpful.  Using this and these articles on nLab <a href=\"https://ncatlab.org/nlab/show/monad+%28in+computer+science%29\">1</a>, <a href=\"https://ncatlab.org/nlab/show/Kleisli+category\">2</a> I feel like I'm on the brink of understanding... right now I'm trying to figure out if the flatMap from computer science and the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">♭</mi></mrow><annotation encoding=\"application/x-tex\">\\flat</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"mord\">♭</span></span></span></span> decorated morphisms from Mac Lane are the same thing or not...</p>",
        "id": 526466843,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751309697
    },
    {
        "content": "<p>I don't remember what Mac Lane writes <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">♭</mi></mrow><annotation encoding=\"application/x-tex\">\\flat</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"mord\">♭</span></span></span></span> for off the top of my head but I'd be happy to try to help if you wanted to remind us of how that vs flatMap work, maybe in examples.</p>",
        "id": 526488865,
        "sender_full_name": "Kevin Carlson",
        "timestamp": 1751318597
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"609515\">@Kevin Carlson</span> I think this calls for a graphic... (stay tuned)</p>",
        "id": 526514516,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751337427
    },
    {
        "content": "<p>Can someone say (briefly and roughly) what \"flatMap\" is in computer science?</p>",
        "id": 526527974,
        "sender_full_name": "John Baez",
        "timestamp": 1751348232
    },
    {
        "content": "<p><code>flatMap</code> is more traditionally called <code>bind</code> and also denoted as a terrifying infix operator <code>=&lt;&lt;</code>. It can be defined as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mrow><mi mathvariant=\"normal\">f</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">t</mi><mi mathvariant=\"normal\">M</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">p</mi></mrow><mi>T</mi></msup><mi>f</mi><mo>=</mo><msup><mi>μ</mi><mi>T</mi></msup><mo>∘</mo><mi>T</mi><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">\\mathrm{flatMap}^T f = μ^T ∘ Tf</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1201em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">flatMap</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9257em;\"><span style=\"top:-3.1473em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0358em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∘</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>, for a monad <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span>.</p>",
        "id": 526528314,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751348493
    },
    {
        "content": "<p><code>flatMap</code> is introduced in <em>Categories for the Working Mathematician</em>, on page 147, section VI.5 <em>«Free Algebras for a Monad»</em> <em>(in second edition)</em>, as the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">♭</mi></mrow><annotation encoding=\"application/x-tex\">\\flat</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"mord\">♭</span></span></span></span> <em>(«flat»)</em> superscript operator.</p>",
        "id": 526528738,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751348784
    },
    {
        "content": "<p>It is called <code>flatMap</code> because you first <em>«map»</em> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>↦</mo><mi>T</mi><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f ↦ Tf</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">↦</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>, and then <em>«flatten»</em> with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>μ</mi><mi>T</mi></msup></mrow><annotation encoding=\"application/x-tex\">μ^T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0358em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span>.</p>",
        "id": 526528837,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751348855
    },
    {
        "content": "<p>Speaking abstractly, <code>flatMap</code> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">♭</mi></mrow><annotation encoding=\"application/x-tex\">\\flat</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"mord\">♭</span></span></span></span> is one of the two mutually inverse components of the adjunction between the category <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span></span></span></span> for a monad <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mo>:</mo><mi mathvariant=\"script\">C</mi><mo>→</mo><mi mathvariant=\"script\">C</mi></mrow><annotation encoding=\"application/x-tex\">T: \\mathcal C → \\mathcal C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.05834em;\">C</span></span></span></span> and the category of free algebras of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span>.</p>",
        "id": 526529502,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751349340
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275920\">John Baez</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/526527974\">said</a>:</p>\n<blockquote>\n<p>Can someone say (briefly and roughly) what \"flatMap\" is in computer science?</p>\n</blockquote>\n<p>It's the Kleisli lift / extension operator</p>",
        "id": 526529965,
        "sender_full_name": "Nathan Corbyn",
        "timestamp": 1751349601
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275989\">Paolo Perrone</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/496643506\">said</a>:</p>\n<blockquote>\n<ul>\n<li>I wrote <a href=\"https://arxiv.org/abs/1912.10642\">these lecture notes</a> (see section 5 for monads), which later became <a href=\"https://www.worldscientific.com/worldscibooks/10.1142/13670#t=aboutBook\">this book</a> (see chapter 5 for monads and sections 6.4 and 6.5 for strong monads etc.)</li>\n</ul>\n</blockquote>\n<p>Thank you for sharing. The book looks very interesting and accessible.</p>",
        "id": 526548041,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751356926
    },
    {
        "content": "<p>flatMap=bind=the transpose map in the adjunction here  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><msub><mi>G</mi><mi>T</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>T</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo><mover><mo><mo>→</mo></mo><mi mathvariant=\"normal\">♭</mi></mover></mo><msub><mi>X</mi><mi>T</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>F</mi><mi>T</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>T</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">X(x,G_T(y_T))\\overset{\\flat}\\to X_T(F_T(x),y_T)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4419em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mop op-limits\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1919em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">→</span></span></span><span style=\"top:-3.5669em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">♭</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> was coming in my next post <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> I'll still try to complete the infographic...</p>\n<p>The first place I found the phrase \"Kleisli extension\" was at nLab.  I think one of the things I'm seeking clarity on is \"what does the Kleisli category formulation of monads bring to the table, as compared to the older \"map-join\" formulation?\"</p>\n<p>The other thing I was trying to get straight in my head was going to be \"when programming with monads, what am I handling?  Am I using <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mo separator=\"true\">,</mo><mi>μ</mi><mo separator=\"true\">,</mo><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">T,\\mu,\\eta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">μ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>?  Or am I typically using \"bind\"? Am I operating on things in the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span>? (That's what it seems like, anyway...)</p>",
        "id": 526589042,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751370282
    },
    {
        "content": "<p>For example, an answer might be along the lines of \"you move into the Kleisli category with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>F</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">F_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> and do stuff there and come back with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>.\" or something like that.  I have no idea if that's the right picture though.</p>",
        "id": 526592571,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751371521
    },
    {
        "content": "<p>You are typically using <code>bind</code> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">η</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>. Ideally you even have a special notation called <code>do</code> that kind of integrates <code>bind</code> with <em>λ</em> calculus, but <code>do</code> notation is only available in fancy languages. I do not think the mindset of practical computer programming is helped in any way by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>F</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">F_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>. In my experience, it is all about syntactic and typological thinking. For example: <em>«I need a function of such and such type, how can I build it out of the stuff I have?»</em> And the stuff you have includes the action <code>map</code> of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span> on arrows, the <code>bind</code> thing, and other devices. In functional programming, the problem is always to construct an arrow of a certain type, possibly verifying certain equations. Imperative and object oriented programming is much more complicated, involves all kinds of temporal and dynamic reasoning, and is not helped much by monads or other categorial formalities.</p>",
        "id": 526602530,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751374730
    },
    {
        "content": "<p>I respectfully disagree with \"Monads aren't useful for imperative languages\".</p>\n<p>When designing an API, you want it to be resistant to changes in the implementation, and a nice way to do that is use APIs that are more general than particular applications.</p>\n<p>To me it seems this clarity over the really fundamental interfaces helped Rust make nice choices with their error system for example.</p>",
        "id": 526615838,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751378474
    },
    {
        "content": "<p>Can you explain to me how exactly monads are useful for imperative languages? I do not see the picture you have in mind. How do you use your knowledge of monads when designing API that are resistant to changes in the implementation? I am not familiar with Rust's error system, so this example does not help.</p>\n<p>I readily agree that it is possible to think about an imperative program as a functional program with a suitable monad. I am not sure but possibly we can even claim that any imperative environment can be modelled by a suitable monad. What I meant to express is that the problems of the kind you solve in the practice of imperative programming do not lend themselves to categorial reasoning. I shall be happy to be shown wrong about this!</p>",
        "id": 526617831,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751379043
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"583446\">@Ignat Insarov</span> Cutting down on repetitive and error-prone boilerplate is a pretty big use case for monads in software development (e.g. this is the main purpose of the <code>Monad</code> instance for Haskell's <code>Maybe</code>).</p>\n<p>Since imperative languages suffer from error-prone repetitive boilerplate just as often, monads have plenty of useful applications in imperative programming.</p>\n<p>Of course, monads won't make imperative programs _in general_ amenable to equational reasoning (much less categorial reasoning), but a well-chosen monad can certainly make reasoning about the parts of the program using the monad easier and more compositional.</p>",
        "id": 526625102,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1751381072
    },
    {
        "content": "<p>Can you give me an example? Like, how does this work practically, not in principle?</p>",
        "id": 526625428,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751381157
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"583446\">Ignat Insarov</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/526625428\">said</a>:</p>\n<blockquote>\n<p>Can you give me an example? Like, how does this work practically, not in principle?</p>\n</blockquote>\n<p>Not sure what sort of example you're looking for, but the classic example for when you'd use a monad in an imperative language is backtracking search.</p>\n<p>I attach a self-contained C# example of implementing backtracking search using the List monad: <a href=\"https://dotnetfiddle.net/4L6WjF\">C# list monad</a>.</p>\n<p>Of course, you will find monads in almost any commercial C# program, under the name LINQ.</p>",
        "id": 526638858,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1751385070
    },
    {
        "content": "<p>I like Zoltan's example, but here's the example I had in mind.</p>\n<p>Stroustrup has nice discussion on the motivations for exceptions, in his book \"C++ programming language\". He goes over many pros and cons of various error handling mechanisms.</p>\n<p>One of his examples of bad code you're forced to write without access to exceptions was the following</p>\n<div class=\"codehilite\" data-code-language=\"C++\"><pre><span></span><code><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">))</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">true</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">false</span><span class=\"p\">;</span>\n<span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">false</span><span class=\"p\">;</span>\n</code></pre></div>\n<p>With the warning being, that you can't assume all programmers will be this systematic in addressing their errors, and few programmers want to write code like this anyways.</p>\n<p>Most people want to write, and read, the following instead:</p>\n<div class=\"codehilite\" data-code-language=\"C++\"><pre><span></span><code><span class=\"n\">g</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"n\">g</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span><span class=\"w\">  </span><span class=\"c1\">//If either of these fail, this fact is communicated automatically by the computer if exceptions are used.</span>\n</code></pre></div>\n<p>An implicit monadic interface allows the programmer to abstract over the pattern Stroustrup doesn't like without adding a dedicated language feature.</p>\n<p>A common situation, is a systems programmer asks for memory to be allocated, but there's some chance there isn't enough, or there's some other error, so a null pointer may be returned instead. And typically we have to compose these one after another. Then something like the following is workable:</p>\n<div class=\"codehilite\" data-code-language=\"C++\"><pre><span></span><code><span class=\"k\">template</span><span class=\"o\">&lt;</span><span class=\"k\">typename</span><span class=\"w\"> </span><span class=\"nc\">A</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">typename</span><span class=\"w\"> </span><span class=\"nc\">F</span><span class=\"o\">&gt;</span>\n<span class=\"k\">auto</span><span class=\"w\"> </span><span class=\"n\">bind</span><span class=\"p\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"p\">){</span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">=</span><span class=\"p\">](</span><span class=\"k\">auto</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"p\">){</span>\n<span class=\"w\">        </span><span class=\"k\">auto</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"p\">(</span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"k\">nullptr</span><span class=\"p\">){</span>\n<span class=\"w\">            </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">out</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"k\">nullptr</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"p\">};</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>The simple idea is to put the pattern Stroustrup doesn't like behind a function call, but is that actually a good idea? It being one operation of a Monad makes it much more likely this is a reasonable thing to do. Optional has a version of this implemented as <a href=\"https://en.cppreference.com/w/cpp/utility/optional/and_then.html\">and_then</a>.</p>\n<p>Rust runs with this, Rust has disjoint unions and commonly returns errors via these. Further Rust requires you define your functions on all of the cases. Consequently, you're forced to write code in the style Stroustrup says is bad, except because we know these are monads, we know everything should be fine if we simply have the error return the first occurance of an error in the signature of our function.</p>\n<p>So rust provides sugar, and methods for this plumbing.</p>\n<p>So a program that you'd be forced to write like this (what Stroustrup doesn't like):</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">fs</span><span class=\"p\">::</span><span class=\"n\">File</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">io</span><span class=\"p\">::</span><span class=\"n\">ErrorKind</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">greeting_file_result</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">File</span><span class=\"p\">::</span><span class=\"n\">open</span><span class=\"p\">(</span><span class=\"s\">\"hello.txt\"</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">greeting_file</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">greeting_file_result</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"nb\">Ok</span><span class=\"p\">(</span><span class=\"n\">file</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Err</span><span class=\"p\">(</span><span class=\"n\">error</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">.</span><span class=\"n\">kind</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"n\">ErrorKind</span><span class=\"p\">::</span><span class=\"n\">NotFound</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">File</span><span class=\"p\">::</span><span class=\"n\">create</span><span class=\"p\">(</span><span class=\"s\">\"hello.txt\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">                </span><span class=\"nb\">Ok</span><span class=\"p\">(</span><span class=\"n\">fc</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">fc</span><span class=\"p\">,</span>\n<span class=\"w\">                </span><span class=\"nb\">Err</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"fm\">panic!</span><span class=\"p\">(</span><span class=\"s\">\"Problem creating the file: {e:?}\"</span><span class=\"p\">),</span>\n<span class=\"w\">            </span><span class=\"p\">},</span>\n<span class=\"w\">            </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">                </span><span class=\"fm\">panic!</span><span class=\"p\">(</span><span class=\"s\">\"Problem opening the file: {error:?}\"</span><span class=\"p\">);</span>\n<span class=\"w\">            </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"p\">},</span>\n<span class=\"w\">    </span><span class=\"p\">};</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>can instead be written like this (using properly defined methods, and sugar via ?):</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">fs</span><span class=\"p\">::</span><span class=\"n\">File</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">io</span><span class=\"p\">::{</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Read</span><span class=\"p\">};</span>\n\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">read_username_from_file</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">io</span><span class=\"p\">::</span><span class=\"n\">Error</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">username</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">String</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">();</span>\n\n<span class=\"w\">    </span><span class=\"n\">File</span><span class=\"p\">::</span><span class=\"n\">open</span><span class=\"p\">(</span><span class=\"s\">\"hello.txt\"</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">.</span><span class=\"n\">read_to_string</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">username</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n\n<span class=\"w\">    </span><span class=\"nb\">Ok</span><span class=\"p\">(</span><span class=\"n\">username</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>The question mark syntax is like C#'s nullable, where failed outputs propagate automatically to the return.</p>\n<p>That said, I'm not a Rust programmer, so I don't understand the nuance of their choices, and I know they're a pragmatic bunch so I'm sure their choices don't match perfectly with my intuition for this. I recommend you read their take on this stuff in detail if you want a more authoritative perspectives (<a href=\"https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html\">https://doc.rust-lang.org/book/ch09-02-recoverable-errors-with-result.html</a>)</p>\n<p>Note, this is just one example, again the big win for me with this stuff is when Zoltan says LINQ stuff are Monads, immediately I have a lot of information about what that implies about the interface. Whereas if someone says an interface is \"applyable\" or something, I have very little idea of what that entails, or what that means. The categorical language is extremely useful when I need to work with multiple libraries, or one library over a long period of time.</p>",
        "id": 526657417,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751392123
    },
    {
        "content": "<p>When someone says the natural numbers are a monoid over addition, then you know they added zero, and have some sense why this is a good thing to do. When someone calls something a Monad, you know they're adding dummy wrappers and such, and again, have some sense why this makes life easier.</p>",
        "id": 526658160,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751392448
    },
    {
        "content": "<p>I see, so, as far as imperative languages go, we are talking, more often than not, about a pre-determined set of monads, provided by language designers. Examples: LINQ, exceptions. Right?</p>\n<p>I am still not sure I understand how exceptions work in Rust. They have a sum type with two variants that signal success and error. The <code>Result</code> type. Is it hard-wired into the compiler?</p>",
        "id": 526660549,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751393428
    },
    {
        "content": "<p>C++'s optional is not built into the language, and technically the language has a form of higher kinded types with template templates. But the committee didn't build around it because they felt those features were hard to use.</p>\n<p>But they could be used in principle.</p>\n<p>C++ Futures don't match a monadic interface, even though they could, which Bartosz argued about extensively a bit ago. So it's meaningful to talk about a designed interface supporting monadic operations.</p>\n<p>So no, I don't think there's a meaningful sense in which the only Monads present are the ones provided by the language, with respect to C++.</p>\n<p>But even if that were true, the question at issue is whether Monads are useful for imperative programming. Even if they were only provided by the language, they would still be useful.</p>\n<p>My understanding is <code>Result</code> is not hardwired into the compiler.</p>",
        "id": 526668541,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751397088
    },
    {
        "content": "<p>Oh, so C++ joins JavaScript among the languages that failed to make futures / promises aligned with the monad interface. Sad.</p>\n<blockquote>\n<p>C++ Futures don't match a monadic interface, even though they could, <br>\nwhich Bartosz argued about extensively a bit ago. So it's meaningful to <br>\ntalk about a designed interface supporting monadic operations.</p>\n</blockquote>\n<p>Can you link me to this extensive argument?</p>",
        "id": 526680870,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751403003
    },
    {
        "content": "<p>In these links you see Bartosz grappling with the issues, but not using monad terminology yet <br>\n<a href=\"https://bartoszmilewski.com/2009/03/03/broken-promises-c0x-futures/\">https://bartoszmilewski.com/2009/03/03/broken-promises-c0x-futures/</a>, </p>\n<p><a href=\"https://bartoszmilewski.com/2009/03/10/futures-done-right/\">https://bartoszmilewski.com/2009/03/10/futures-done-right/</a></p>\n<p>And here he's loudly asking for a monadic interface:<br>\n<a href=\"https://bartoszmilewski.com/2014/02/26/c17-i-see-a-monad-in-your-future/\">https://bartoszmilewski.com/2014/02/26/c17-i-see-a-monad-in-your-future/</a></p>\n<p>Across his blog you can see him thinking about concurrency and multi-threading for years.</p>\n<p>I believe I saw a tweet of his at some point where he explicitly said this (or some other similar interface), got him to understand the deeper significance of the categorical ideas behind these imperative interfaces.</p>\n<p>Reading between the lines of your frustration a bit, I'm also partial to this video of Eric meijer's discussion on the way these ideas help one understand language specifications: </p>\n<p><a href=\"https://youtu.be/JMP6gI5mLHc?si=DiDZBCUzcZWuAZn5\">https://youtu.be/JMP6gI5mLHc?si=DiDZBCUzcZWuAZn5</a></p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"JMP6gI5mLHc\" href=\"https://youtu.be/JMP6gI5mLHc?si=DiDZBCUzcZWuAZn5\"><img src=\"https://uploads.zulipusercontent.net/e35113a6aa162693153ffa6c6202ae8260fa9d64/68747470733a2f2f692e7974696d672e636f6d2f76692f4a4d50366749356d4c48632f6d7164656661756c742e6a7067\"></a></div><p>Specifically, two half's of an adjunction can be seen in Java's language specification, my understanding of Meijer's view is that therefore the monads are hiding in the spec \"unintentionally\". Ergo, monads help one understand what the language is doing, because they occur \"in the wild\", <em>not</em> because they're designed into the language.</p>\n<p>Anyways, I hope this felt useful and not redundant. There's something about software that makes programmers extremely particular about definitions like this, and I'm no exception. But I hope I collected something here that's fun to think about.</p>",
        "id": 526685219,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751405134
    },
    {
        "content": "<p>This is great! <span class=\"user-mention\" data-user-id=\"277352\">@Alex Kreitzberg</span> Thanks!</p>",
        "id": 526686701,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751405827
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"583446\">Ignat Insarov</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/526602530\">said</a>:</p>\n<blockquote>\n<p>You are typically using <code>bind</code> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">η</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>.</p>\n</blockquote>\n<p>It's probably time for me to immerse myself in examples. The environment I'm working in is Kotlin, and there's a library for it called Arrow that should be my starting point.  Regarding the snippet of your comment I've quoted:  So, is it right to say that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">\\eta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span> is going to put types into the image of the object function of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span>, and then on these wrapped types, I bind on functions obtaining a new thing in the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span>'s object function?</p>",
        "id": 526691074,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751408528
    },
    {
        "content": "<p>You could do that, but you do not have to. Say your monad is called <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>. If you have a value <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>:</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">x: X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> and a function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>M</mi><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">f: X → MY</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span>, you can do <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>f</mi><mi mathvariant=\"normal\">♭</mi></msup><mo stretchy=\"false\">(</mo><mi>η</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f^\\flat (η (x))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.138em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.888em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">♭</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">))</span></span></span></span>, or you can simply do <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f (x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span>.</p>\n<p>Rather, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">η</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span> is used in more complicated situations, as a syntactic convenience. For example, say you want to read a file, bind the contents to a variable, and then count the characters. You can do it like so: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">d</mi></mrow><mo stretchy=\"false\">(</mo><mrow><mi mathvariant=\"normal\">f</mi><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">e</mi></mrow><mo stretchy=\"false\">)</mo><mstyle mathsize=\"0.9em\"><mo>&gt;</mo><mo>&gt;</mo><mo>=</mo></mstyle><mi>λ</mi><mi>x</mi><mi mathvariant=\"normal\">.</mi><mi>η</mi><mo stretchy=\"false\">(</mo><mrow><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">n</mi><mi mathvariant=\"normal\">t</mi></mrow><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm {read} (\\mathrm{file}) {\\small &gt;&gt;=} λ x. η (\\mathrm {count} x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">read</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathrm\">file</span></span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mrel sizing reset-size6 size5\">&gt;&gt;=</span></span><span class=\"mord mathnormal\">λ</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathrm\">count</span></span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span>. This is convenient when you use <code>do</code> notation, but is not necessary, because <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">η</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span> is natural, so you can always move it next to a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi></mrow><annotation encoding=\"application/x-tex\">μ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">μ</span></span></span></span> and simplify your code.</p>\n<p>I am not sure if there are any situations where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">η</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span> is unavoidable.</p>",
        "id": 526692595,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751409673
    },
    {
        "content": "<p>This syntactic game becomes more interesting when you get access to devices like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">q</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">n</mi><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">e</mi></mrow><mo>:</mo><mi>F</mi><mi>M</mi><mo>→</mo><mi>M</mi><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">\\mathrm{sequence}: FM → MF</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">sequence</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">FM</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">MF</span></span></span></span>, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> is a special kind of functor which supports this operation, and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> is a monad. Another way to make this game more interesting is to stack several compatible monads on top of one another.</p>",
        "id": 526692919,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751409969
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"583446\">Ignat Insarov</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/526692919\">said</a>:</p>\n<blockquote>\n<p>stack several compatible monads</p>\n</blockquote>\n<p>I had that thought not long ago: it seems like it would be common for different monadic operations to interleave in complex ways.  When the goal is to use monads to reason about the behavior, is it still possible to keep this straight when several monads are in play?  Maybe with sufficient compatibility between them?</p>",
        "id": 526696230,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751412255
    },
    {
        "content": "<p>There is a thing called <em>«distributive law»</em> that is a natural transformation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>N</mi><mo>→</mo><mi>N</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">MN → NM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">MN</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">NM</span></span></span></span> with some equations that ensure <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">NM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">NM</span></span></span></span> is a monad insofar as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> are. We can also safely get a composite monad by composing a monad and an adjunction. Both of these tasks are only a little bit technical. But monads so composed can get rather baroque in practice. The earliest reference for distributive laws is <em>Distributive Laws</em> by John Beck, in <em>Lecture Notes in Mathematics, No. 80, Springer-Verlag, 1969</em>.</p>\n<p>Then, there is a whole cottage industry of algebraic and even, I guess, <em>«non-algebraic»</em> effects and handlers. It seems to be in deep weeds right now. I expect there is an elegant theory underneath, and I am waiting for a hero that will unearth it and shed the light of certainty on it. <em>What Is Algebraic about Algebraic Effects and Handlers</em> by Andrej Bauer is a source I used as a reference more than once.</p>",
        "id": 526746538,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751444793
    },
    {
        "content": "<p>I found that paper of Bauer's quite good at shedding light on the elegant theory! (-:</p>",
        "id": 526748256,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751445271
    },
    {
        "content": "<p>I think the short answer to how algebraic effects allow you to combine monads cleanly is that when all the monads are finitary, you can just take their <em>coproduct</em> in the category of monads.  That gives you a way to put them together without any \"interaction\".</p>",
        "id": 526748663,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751445380
    },
    {
        "content": "<p>If you need nontrivial interaction, you can often get that with handlers.  Those are admittedly harder to understand from a category-theoretic viewpoint, but from a programming standpoint I think they're pretty easy to explain: an effect is like a \"resumable exception\" and a handler is like an exception handler except it can return a value to the raiser.</p>",
        "id": 526748753,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751445409
    },
    {
        "content": "<p>Andrej's article is great, but I do not feel like I have the instruments needed to investigate real world programs after reading it. It is possible that I was not able to understand some more advanced parts of it completely.</p>",
        "id": 526749485,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751445626
    },
    {
        "content": "<p>For instance, given some code with effects and handlers, I find it hard to state what needs to be checked before I can conclude or refute that these effects are algebraic.</p>",
        "id": 526750005,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751445774
    },
    {
        "content": "<p>I thought as soon as you see code written with \"effects and handlers\" it is by definition algebraic.</p>",
        "id": 526750562,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751445932
    },
    {
        "content": "<p>I do not have any reason to think so or otherwise. I am really lost on this question.</p>",
        "id": 526750646,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751445952
    },
    {
        "content": "<blockquote>\n<p>when all the monads are finitary, you can just take their <em>coproduct</em> in the category of monads</p>\n</blockquote>\n<p>Was this in Andrej's article? Sounds like great news, although I need to scribble for some time before I understand what a <em>«sum of monads»</em> could be.</p>\n<p>By the way, is it a sin to call co-limits without equations <em>«sums»</em> instead of that long word you are using?</p>",
        "id": 526750668,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751445960
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"583446\">Ignat Insarov</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/526750668\">said</a>:</p>\n<blockquote>\n<p>is it a sin to call co-limits without equations <em>«sums»</em> instead of that long word you are using?</p>\n</blockquote>\n<p>No.  Although \"that long word you are using\" is even longer than \"coproduct\".  (-:O</p>",
        "id": 526751122,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751446121
    },
    {
        "content": "<p>Looking up the <a href=\"https://github.com/yallop/effects-bibliography\">effects bibliography</a> I find a paper called <a href=\"https://dl.acm.org/doi/10.1145/581478.581492\">Composing monads using coproducts</a>.</p>",
        "id": 526752067,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751446430
    },
    {
        "content": "<p>Oh, I actually have this article bookmarked. Along with 100 other I should have read a long time ago.</p>",
        "id": 526753124,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751446760
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"583446\">@Ignat Insarov</span> What I think unsettles me the most is not knowing what exactly is being handled or used.  If I consider \"bind\" as the main operation, it sounds like I'd usually be handling objects in the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span> (viewed another way, after coming out of the right adjoint <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mi>T</mi></msub></mrow><annotation encoding=\"application/x-tex\">G_T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>?) and \"Kleisli morphisms\" <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>→</mo><mi>T</mi><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">x\\to Ty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>, which leaves you with something in the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span> again.  Is that the interaction every time? Maybe the thing I'm missing is how this works well with \"do\" which I currently probably don't have an appreciation of.</p>",
        "id": 526889366,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751495783
    },
    {
        "content": "<p>I have come up with another approach to explaining the use of monads in software engineering.</p>\n<p>Imagine something like <em>λ</em> calculus but with a special syntax for abstractions, say <em>κ x. e</em>, where <em>(κ x. e₁) e₂</em> is defined in one of these trivially equivalent ways:</p>\n<ul>\n<li><em>(λ x. e₁)♭ e₂</em></li>\n<li><em><code>bind</code> (λ x. e₁) e₂</em></li>\n<li><em>μ (T (λ x. e₁) e₂)</em></li>\n</ul>\n<p>This is very close to what <code>do</code> notation gives you. Specifically, we can offer two way syntactic conversions:</p>\n<p><code>do</code> notation ⇄ <em>κ</em> calculus ⇄ <em>λ</em> calculus</p>\n<p>Here:</p>\n<ul>\n<li>\n<p><code>do</code> notation is a general syntax for writing imperative programs.</p>\n<p>Via <code>do</code> notation, we can see any imperative program as a program in the <em>κ</em> calculus of the monad characterizing that particular language's input and output facilities. The associativity of the monad is then reflected in that you do not need to group the statements of your imperative program with any parentheses.</p>\n<p>Specifically, <em><code>do</code> {x ← e₁; e₂}</em> becomes <em>(κ x. <code>do</code> e₂) (<code>do</code> e₁)</em> and <em><code>do</code> {e}</em> becomes <em>e</em>. <em>η</em> is automatically ascribed where needed in non-pure languages.</p>\n</li>\n<li>\n<p><em>λ</em> calculus is a general syntax for writing functional programs.</p>\n<p><em>λ</em> calculus can be inlaid into our <em>κ</em> calculus by interjecting <em>η</em> here and there, like so:</p>\n<p><em>η ((λ x. e₁) e₂) = μ (T (λ x. η e₁) (η e₂)) = (κ x. η e₁) (η e₂)</em></p>\n</li>\n</ul>\n<p>So:</p>\n<ul>\n<li>In a way, the mechanics of monads lets you write imperative programs as if they were written in a language syntactically equivalent to <em>λ</em> calculus.</li>\n<li>In a way, imperative programs are special notation for elements of the objects in the image of your monad's action on objects — the <code>do</code> notation.</li>\n</ul>\n<p>Of course, industrial imperative languages must throw a wrench or two into our elegant clockwork. For instance, in C you can use curly braces to denote variable scoping, and this means our <code>do</code> notation for C will not be associative <em>«out of the box»</em>. We can always do away with variable scoping by removing curly braces and coming up with fresh names for shadowed variables, so in this instance we can reaffirm that C can be described by a monad. We shall also need to deal with references and pointers, but this should not be too hard.</p>\n<p>Does this explanation make sense?</p>\n<p>There are other notations for <em>(perhaps more fanciful)</em> monads, like the LINQ notation mentioned above and its mathematically styled predecessor called <em>«list comprehension»</em>. I wonder if we can take this parallel as far as to claim that SQL is a syntax for a certain kind of monads.</p>",
        "id": 527154357,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751625723
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"583446\">@Ignat Insarov</span> It's another helpful perspective (although my lack of familiarity with lambda/kappa calculus and functional programming in general is an issue).</p>\n<p>I've also been finding this <a href=\"https://bartoszmilewski.com/2016/11/21/monads-programmers-definition/\">blog post</a> extremely helpful.  The Bartosz Milewski youtube lectures I had seen before this never got to the depth I needed, but if this is any indication, I should be reading his blog to get that information...</p>",
        "id": 527166327,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751630176
    },
    {
        "content": "<p>Well, you cannot possibly be familiar with <em>κ</em> calculus since I just invented it.</p>",
        "id": 527246466,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751680980
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"583446\">@Ignat Insarov</span> Oh?  I thought you were <a href=\"https://en.wikipedia.org/wiki/Kappa_calculus\">referring to this</a>.</p>",
        "id": 527247039,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751681782
    },
    {
        "content": "<p>Maybe I should start using Chinese characters. There are hardly any Greek left.</p>",
        "id": 527247086,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751681858
    },
    {
        "content": "<p>I renamed it to <em>ζ</em> calculus, hopefully there is no such calculus in existence yet.</p>",
        "id": 527247366,
        "sender_full_name": "Ignat Insarov",
        "timestamp": 1751682248
    },
    {
        "content": "<p>I'm getting a better appreciation for how they're being used in programming, and I find the ideas of a monad, its E-M and Kleisli categories, and relationship with adjunctions, and T-algebras very interesting in themselves, but let me ask this in all seriousness:</p>\n<p>What does one accomplish using this handful of methods in category theory?  Is it mainly a unifying tool?</p>\n<p>I can imagine at any given juncture we may have an adjunction, or perhaps a T algebra, and then one goes through motions to inspect this family of related things.  Maybe an example of what sorts of insights this process gives would be helpful.</p>",
        "id": 527287997,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751728947
    },
    {
        "content": "<blockquote>\n<p>What does one accomplish using this handful of methods in category theory? Is it mainly a unifying tool?</p>\n</blockquote>\n<p>Are you asking what <em>computer scientists</em> accomplish this way?   Or are you asking what mathematicians accomplish?   </p>\n<p>I think these are quite different questions.</p>\n<p>I have no real understanding of the former, since I don't really program.   The latter is something I understand.</p>",
        "id": 527292243,
        "sender_full_name": "John Baez",
        "timestamp": 1751733936
    },
    {
        "content": "<p>I still feel like a relative novice, so I'm curious how the pros would answer that question. </p>\n<p>But that said, learning category theory feels very strange. For me, it requires an enormous amount of energy, but then when something finally makes sense, it seems very simple in retrospect, but not vacuously so. A math mentor of mine once described algebra as \"a lot of little results\" vs analysis's \"a few big results\".</p>\n<p>Learning category starts like \"oh it's a lot of little results!\" But then it transitions to feel like \"It's a few little results, applied over and over again?\" And what I mean by that, is category theory is more self reinforcing than any other math subject I've learned. When you've learned a critical mass of category theory, what you learned feels self evident, and what's left feels forced. After this ball gets rolling, you see it all over the place in mathematics, proving simple stuff over and over and over again.</p>\n<p>It's as if you get a couple new programming language features, and suddenly, <em>everything</em> needs half as many clever tricks to write, it's very strange.</p>\n<p>Less abstractly though I find Dan Piponi's application of Commutative Monads here very fun, there's a video link at the bottom of <a href=\"https://dl.acm.org/doi/abs/10.1145/1631687.1596553\">https://dl.acm.org/doi/abs/10.1145/1631687.1596553</a></p>",
        "id": 527293394,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751735471
    },
    {
        "content": "<p>After I wrote that I came up with a personal concrete example.</p>\n<p>I'm a bit embarrassed with how difficult \"change of variables\" or \"coordinate transformations\" have been for me. Recently I've been reviewing them in \"mathematics form and function\" and it's been fun to \"fill in\" the category theory Mac Lane implies.</p>\n<p>In it he gives a diagram <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mover><mo stretchy=\"true\" minsize=\"3.0em\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mi>l</mi></mpadded></mover><mi>C</mi><mover><mo stretchy=\"true\" minsize=\"3.0em\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mi>ϕ</mi></mpadded></mover><mi>D</mi><mover><mo stretchy=\"true\" minsize=\"3.0em\">→</mo><mpadded width=\"+0.6em\" lspace=\"0.3em\"><mi>f</mi></mpadded></mover><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">[0, 1] \\xrightarrow{l} C \\xrightarrow{\\phi} D \\xrightarrow{f} \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3581em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1081em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"0.522em\" viewBox=\"0 0 400000 522\" preserveAspectRatio=\"xMaxYMin slice\"><path d=\"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z\"/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.011em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1191em;vertical-align:-0.011em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1081em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ϕ</span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"0.522em\" viewBox=\"0 0 400000 522\" preserveAspectRatio=\"xMaxYMin slice\"><path d=\"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z\"/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.011em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1191em;vertical-align:-0.011em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel x-arrow\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1081em;\"><span style=\"top:-3.322em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight x-arrow-pad\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10764em;\">f</span></span></span></span><span class=\"svg-align\" style=\"top:-2.689em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"hide-tail\" style=\"height:0.522em;min-width:1.469em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"0.522em\" viewBox=\"0 0 400000 522\" preserveAspectRatio=\"xMaxYMin slice\"><path d=\"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z\"/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.011em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span></p>\n<p>As the formal composition of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo>:</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>→</mo><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">l : [0, 1] \\rightarrow C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi><mo>:</mo><mi>C</mi><mo>→</mo><mi>D</mi></mrow><annotation encoding=\"application/x-tex\"> \\phi : C \\rightarrow D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ϕ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi>D</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">f : D \\rightarrow \\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> (edit: I added this line, because the previous line isn't rendering on mobile for me).</p>\n<p>Where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding=\"application/x-tex\">\\phi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ϕ</span></span></span></span> between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> are coordinate transforms. We think of elements of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> as being described by coordinates in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>, which we then rewrite in terms of coordinates of elements of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span> which we notate as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>q</mi><mi>i</mi></msup></mrow><annotation encoding=\"application/x-tex\">q^i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0191em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi></mrow><annotation encoding=\"application/x-tex\">q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span></span></span></span>.</p>\n<p>So that's fine, but what does that then mean in an expression like:</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∫</mo><mrow><mi>ϕ</mi><mo>∘</mo><mi>l</mi></mrow></msub><mi>ω</mi><mo>=</mo><msub><mo>∫</mo><mi>l</mi></msub><msup><mi>ϕ</mi><mo lspace=\"0em\" rspace=\"0em\">∗</mo></msup><mi>ω</mi></mrow><annotation encoding=\"application/x-tex\">\\int_{\\phi \\circ l} \\omega = \\int_l \\phi^{*}\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2969em;vertical-align:-0.4919em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1303em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ϕ</span><span class=\"mbin mtight\">∘</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4919em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1608em;vertical-align:-0.3558em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1303em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ϕ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∗</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span></span></span></span><br>\n(edit: It seems there's a bug on mobile, that's making this not render for me properly)</p>\n<p>The path in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo>:</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>→</mo><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">l : [0, 1] \\rightarrow C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> gets taken to a path in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi><mo>∘</mo><mi>l</mi><mo>:</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo><mo>→</mo><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">\\phi \\circ l : [0, 1] \\rightarrow D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ϕ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∘</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span>; but, then the one form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ω</mi><mo>:</mo><mi>T</mi><mi>D</mi><mo>→</mo><mi>T</mi><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\omega : T D \\rightarrow T\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathbb\">R</span></span></span></span> gets \"pulled back\" to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>ϕ</mi><mo lspace=\"0em\" rspace=\"0em\">∗</mo></msup><mi>ω</mi><mo>:</mo><mi>T</mi><mi>C</mi><mo>→</mo><mi>T</mi><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\phi^{*} \\omega: T C \\rightarrow T\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ϕ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∗</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ω</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">TC</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathbb\">R</span></span></span></span>.</p>\n<p>So by adding \"type signatures\" we can see this coordinate transformation playing dual opposing roles to carry out a change of variables for an integral. In one context it acts as a covariant functor, and in the other a contravariant one.</p>\n<p>If I only worked with the formula for the integral when making sense of change of variables, I would lose the opportunity to notice these dual relationships between the spaces these functions operate between.</p>\n<p>The rules of the signatures are \"simple\" enough to be automatic to carry out mentally when you understand how they work. Acting as guard rails for my calculations and my understanding. In this case they've clarified the multifaceted character of how change of variables is used, which helps me be a bit less confused by change of variables, and honestly helps me feel less bad about being confused.</p>\n<p>One thing I see category theory doing is elevating these guard rails to a full blown theory, and getting creative with them. Monads are a present you get once this story is clarified. And they let you, as one of many examples, indicate the presence of side effects - giving you a chance to notice when side effects compose in strange ways.</p>",
        "id": 527298454,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751741678
    },
    {
        "content": "<p>I'm still wondering what Ryan meant when he asked what monads were good for.   If I were an expert Haskell programmer I'd say one thing; as a mathematician I'd say something completely different, since I've used monads at various points in my work in mathematics, for various reasons.  After hearing Alex's long answer, I no longer resist mentioning that I've used monads</p>\n<p>1) To understand the foundations of cohomology for algebraic gadgets (e.g. group cohomology and Lie algebra cohomology), since every kind of algebraic gadget has a monad that describes it, and these monads can be used to turn algebraic gadgets into topological spaces, that we can take the cohomology of.   This is old stuff: it's one of the reasons monads were invented.  I'm just wanted to understand it.</p>\n<p>2) To prove theorems about PROPs (which are a kind of algebraic gadget described by a monad), in order to prove theorems about various specific PROPs, especially categories of electrical circuits. </p>\n<p>3) To prove theorems about plethysm, which is a method of getting new representations of symmetric groups from old ones.</p>\n<p>I should admit that in all three of these projects I relied heavily on <span class=\"user-mention\" data-user-id=\"277611\">@Todd Trimble</span>'s expertise in monads.  So I'd say I'm a beginner when it comes to monads, but at least I now have a sense about when I'll need to ask Todd more questions about them to accomplish a specific task!   <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 527301140,
        "sender_full_name": "John Baez",
        "timestamp": 1751745239
    },
    {
        "content": "<p>How often can you do 1)? Can you turn any algebraic gadget modeled with a Monad into a topological space?</p>",
        "id": 527303392,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751748146
    },
    {
        "content": "<p>Essentially 100% of the time.</p>",
        "id": 527303638,
        "sender_full_name": "John Baez",
        "timestamp": 1751748476
    },
    {
        "content": "<p>I'm saying \"essentially\" because my summary of cohomology and monads was so incredibly sketchy that I don't want you to draw some wacky conclusions based on that.</p>",
        "id": 527303691,
        "sender_full_name": "John Baez",
        "timestamp": 1751748547
    },
    {
        "content": "<p>Would a discussion about this merit a thread? I don't really want to derail this one. Is there a good word to look this up, or does this all get sorted in a classical treatment of algebraic topology?</p>",
        "id": 527303851,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751748807
    },
    {
        "content": "<p>The easiest place to learn this stuff might be in my <a href=\"https://math.ucr.edu/home/baez/qg-fall2018/\">course notes</a>.</p>",
        "id": 527303951,
        "sender_full_name": "John Baez",
        "timestamp": 1751748939
    },
    {
        "content": "<p>A lot of special cases are treated in Cartan and Eilenberg's 1958 book <em>Homological Algebra</em>, and then Mac Lane's 1963 book <em>Homology</em>.  The slick approach based on monads goes back to Godement in 1958, but I feel it was really clearly developed only in Beck's 1967 thesis <a href=\"http://www.tac.mta.ca/tac/reprints/articles/2/tr2.pdf\">Triples, algebras and cohomology</a>.    At this time monads were called \"triples\".</p>\n<p>I feel that nobody has brought this stuff down to earth and explained how simple it all is.  Todd brought it to the level where I can understand it, and my course explained it in a way that students could maybe understand it... but someday I should take those course notes and really expand them.</p>",
        "id": 527304379,
        "sender_full_name": "John Baez",
        "timestamp": 1751749492
    },
    {
        "content": "<p>However, most people don't talk about the process as \"turning an algebraic gadget into a topological space\".  Usually the closest they come is turning it into a simplicial set.</p>",
        "id": 527304681,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751749917
    },
    {
        "content": "<p>Right, but I'm trying to make this stuff seem less scary.  If I said \"simplicial set\", I doubt Alex would be quite as interested.</p>",
        "id": 527304845,
        "sender_full_name": "John Baez",
        "timestamp": 1751750064
    },
    {
        "content": "<p>But anyway, Alex, I wasn't lying to you: you can take an algebraic gadget and turn it into a simplicial set, which is a bunch of simplices stuck together, and then you can think of that as a topological space.... and this connects topology to the theory of algebraic gadgets in a wonderful way.  This is why people invented monads in the first place, and it's still one of the most beautiful and powerful applications.</p>",
        "id": 527305149,
        "sender_full_name": "John Baez",
        "timestamp": 1751750481
    },
    {
        "content": "<p>I believe you! And am excited by your framing.</p>",
        "id": 527305240,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751750587
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275920\">John Baez</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/527292243\">said</a>:</p>\n<blockquote>\n<p>what mathematicians accomplish?</p>\n</blockquote>\n<p>I mean that I now have a picture of what programmers accomplish, and that I want to appreciate more what it buys me as a mathematician.  Just some perspective would do.</p>",
        "id": 527305354,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751750778
    },
    {
        "content": "<p>Okay, great.   I've by now sketched why monads were invented in the first place: any algebraic gadget described by a monad - and that's most things I consider \"algebraic gadgets\", like groups and rings and monoids and modules but not fields - can be turned into a topological space using a wonderful trick called the <a href=\"https://ncatlab.org/nlab/show/bar%20construction\">[[bar construction]]</a>, and this lets you study the gadget using ideas from topology, e.g. you can use cohomology to study the 'holes' in that gadget.</p>",
        "id": 527306178,
        "sender_full_name": "John Baez",
        "timestamp": 1751751804
    },
    {
        "content": "<p>But also, there are so many kinds of algebraic gadgets that it's often helpful to prove general theorems about monads and then instantly know they apply to whatever wacky algebraic gadget you happen to be studying right now, whether it be a <a href=\"https://en.wikipedia.org/wiki/Jordan_algebra\">Jordan algebra</a> or a <a href=\"https://en.wikipedia.org/wiki/Band_(algebra)#Rectangular_bands\">rectangular band</a>.  (I mention these just as examples of weird algebraic gadgets that people like to study.)</p>",
        "id": 527306382,
        "sender_full_name": "John Baez",
        "timestamp": 1751752095
    },
    {
        "content": "<p>Do you know cool applications of the Klesli-categories of Monads for math? The examples you've mentioned so far typically use Eilenberg-Moore categories right? Or do both play a role in the above? </p>\n<p>CS people typically see Klesli-categories first, it's almost synonymous to monads for them.</p>",
        "id": 527306694,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751752538
    },
    {
        "content": "<p>I find that in math the Eilenberg-Moore category of a monad is typically more important, e.g. the \"monad for groups\" is the one whose Eilenberg-Moore category is the category of groups.   </p>\n<p>However, if you start with a finitary monad and want to extract a Lawvere theory from it, you consider its Kleisli category, and find sitting inside there the category of <em>finitely generated</em> free algebras of the monad, and then take its opposite.   For example, the Lawvere theory for groups is the opposite of the category of finitely generated free groups!</p>\n<p>I used to really hate the terms \"Eilenberg-Moore category\" and \"Kleisli category\" for a monad because they sounded so intimidating, and I could never remember which was which.  I would still prefer to call them the \"category of algebras\" and the \"category of free algebras\" of the monad.  But I am now such a jaded veteran that I can say \"Eilenberg-Moore category\" without blushing.</p>",
        "id": 527307048,
        "sender_full_name": "John Baez",
        "timestamp": 1751753005
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275920\">John Baez</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/527304845\">said</a>:</p>\n<blockquote>\n<p>Right, but I'm trying to make this stuff seem less scary.  If I said \"simplicial set\", I doubt Alex would be quite as interested.</p>\n</blockquote>\n<p>Yes, that makes sense.  But I thought if he was going to start looking into the literature, it might also be useful to know the words that most people use.</p>",
        "id": 527309281,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751756489
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275920\">John Baez</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/527307048\">said</a>:</p>\n<blockquote>\n<p>I find that in math the Eilenberg-Moore category of a monad is typically more important</p>\n</blockquote>\n<p>I suspect one reason for that is that mathematicians like to work in categories that have limits and colimits, and EM-categories inherit limits from the base category and usually also colimits, while Kleisli categories don't.</p>",
        "id": 527309440,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751756724
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"275920\">John Baez</span> <a href=\"#narrow/channel/232160-learning.3A-reading-.26-references/topic/Introduction.20to.20Monads/near/527306382\">said</a>:</p>\n<blockquote>\n<p>But also, there are so many kinds of algebraic gadgets that it's often helpful to prove general theorems about monads and then instantly know they apply to whatever wacky algebraic gadget you happen to be studying right now</p>\n</blockquote>\n<p>This is probably the most common way that I've used monads in my research.  Often in the guise of 2-monads, specifically that whenever you have a kind of 2-dimensional algebraic gadget that can be described as the algebras for a 2-monad, you automatically get well-behaved notions of pseudoalgebra, pseudomorphism, lax morphism, and colax morphism.</p>",
        "id": 527309512,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1751756820
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"275920\">@John Baez</span> Well I'm happy to learn anything new about dealing with algebraic gadgets since I'm essentially a ring and module theorist.  And I don't mind the topology either: that was my sub-specialty...</p>\n<p>I've never properly learned homology or cohomology though.  I have learned some of the picture about simplices and \"holes\" during my dip into geometric mechanics.  What form does the \"hole\" information take for something like a ring or a module?  Is that all there is, just an abstracted notion of some hole-of-some-dimension? Or can one tie it to something more recognizable?</p>",
        "id": 527313125,
        "sender_full_name": "Ryan Schwiebert",
        "timestamp": 1751762705
    },
    {
        "content": "<p>Very very very roughly, the points in the space are expressions in your algebraic structure (like elements of your ring like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span>, but also <em>formal</em> unevaluated expressions like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><msup><mi>s</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">r s^{-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span> ), and paths are ways of going from an expression to a more evaluated expression.  So holes detected by the first cohomology group reflect the fact that can be two fundamentally different paths from one point to another: that is, two fundamentally different ways to evaluate the same expression.</p>\n<p>A bit less roughly, your space comes from a simplicial set, and 0-simplices come from formal expressions in your algebraic gadget, and 1-simplices come from formal expressions in formal expressions in your algebraic gadget, and 2-simplices come from formal expressions in formal expressions in formal expressions in your algebraic gadget, and so on.    You should be thinking about an adjunction <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo separator=\"true\">,</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">L, R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> and taking your algebraic gadget <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> and forming <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">R X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">RX</span></span></span></span> and then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi>L</mi><mi>R</mi><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">R L R X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">RX</span></span></span></span> and then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi>L</mi><mi>R</mi><mi>L</mi><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">R L R L X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> and so on.   The monad here is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">R L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\">L</span></span></span></span> and there's also a comonad <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">L R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span>.</p>",
        "id": 527316746,
        "sender_full_name": "John Baez",
        "timestamp": 1751768696
    },
    {
        "content": "<p>The key facts underlying this business are that </p>\n<ul>\n<li>the category of simplices is the walking monoidal category on a monoid object, while </li>\n<li>a monad is just a monoid object in a monoidal category of endofunctors.   </li>\n</ul>\n<p>(I said \"just\" in order to comply with the meme.)</p>\n<p>The details are explained <a href=\"https://math.ucr.edu/home/baez/qg-fall2018/\">in my notes</a>.   If anyone wants to get paid for turning these notes into LaTeX with pictures, please let me know.</p>",
        "id": 527316872,
        "sender_full_name": "John Baez",
        "timestamp": 1751768895
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 527339644,
        "sender_full_name": "Patrick Nicodemus",
        "timestamp": 1751799355
    },
    {
        "content": "<p>While gentlemen would not bring this up in a learning thread at all, if it ever made sense to mention it, now works better than any other time. <span aria-label=\"top hat\" class=\"emoji emoji-1f3a9\" role=\"img\" title=\"top hat\">:top_hat:</span></p>\n<p>There is a slight technicality in that functional programming monads do not always correspond to monoid objects in categories of endofunctors.</p>\n<p>For example, given a type universe <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">U</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{U}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">U</span></span></span></span>, you can define an operation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo>:</mo><mi mathvariant=\"script\">U</mi><mo>→</mo><msup><mi mathvariant=\"script\">U</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">F: \\mathcal{U} \\rightarrow \\mathcal{U}&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> to a higher universe <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"script\">U</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">\\mathcal{U}&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> by  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo><mo>:</mo><mo>=</mo><mi mathvariant=\"script\">U</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">F[X] := \\mathcal{U} \\rightarrow X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>. This comes equipped with the expected eta and bind operations, but does not correspond to a monoid object in an endomorphism category in any straightforward sense. In particular, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo stretchy=\"false\">[</mo><mi>F</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">F[F[X]]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]]</span></span></span></span> does not type-check, since <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">F[X]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]</span></span></span></span> lives outside the universe <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">U</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{U}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">U</span></span></span></span>.</p>",
        "id": 527342115,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1751802376
    },
    {
        "content": "<p>Similarly in category theory people call the Yoneda embedding the free cocompletetion, but it's actually a map from small categories to large categories.</p>",
        "id": 527342660,
        "sender_full_name": "Oscar Cunningham",
        "timestamp": 1751803118
    },
    {
        "content": "<p>Gentlemen do not speak of such things.  <span aria-label=\"shh\" class=\"emoji emoji-1f92b\" role=\"img\" title=\"shh\">:shh:</span></p>\n<p>(Just kidding.   Relative monads.)</p>",
        "id": 527343034,
        "sender_full_name": "John Baez",
        "timestamp": 1751803511
    },
    {
        "content": "<p>It's not inaccurate to call the Yoneda embedding of a small category the free cocompletion; it's just that \"free constructions\" do not always correspond to monads, but rather to <a href=\"https://ncatlab.org/nlab/show/relative%20monads\">[[relative monads]]</a>, as John says.</p>",
        "id": 527344019,
        "sender_full_name": "Nathanael Arkor",
        "timestamp": 1751804740
    },
    {
        "content": "<p>There is also the embedding of a (possibly) large, locally small category into its category of <em>small</em> presheaves. That is the free cocompletion under colimits of small diagrams. Very often small colimits are all you need. (Not always: adjoint functor theorem, etc.)</p>",
        "id": 527364936,
        "sender_full_name": "Paolo Perrone",
        "timestamp": 1751827523
    },
    {
        "content": "<p>I audited my understanding of these monad categories a bit, if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span> is the free monoid monad, then</p>\n<p>The klesli composition <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi>A</mi><mo>→</mo><mi>T</mi><mi>B</mi><mo>∘</mo><mi>g</mi><mo>:</mo><mi>B</mi><mo>→</mo><mi>T</mi><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">f : A \\rightarrow TB \\circ g : B \\rightarrow TC</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">TB</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∘</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">TC</span></span></span></span> makes sense, because maps from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">T B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">TB</span></span></span></span> are determined by maps on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> by the universal property of the free monoid. So Klesli composition is consistent with those arrows being arrows in the category of free monoids.</p>\n<p>The <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span>-Algebra over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>e</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">Set</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span></span></span></span> is the category of monoids. Which inherit limits from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>e</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">Set</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span></span></span></span> per Shulman's note. We do get categorical products and the terminal object in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">Mon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span></span></span></span>. Which is a good thing for doing category theory!</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span> applied to the terminal object in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>e</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">Set</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span></span></span></span> gives <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mo stretchy=\"false\">{</mo><mo>∗</mo><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">T\\{*\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mopen\">{</span><span class=\"mord\">∗</span><span class=\"mclose\">}</span></span></span></span> which is just lists of one element, which is isomorphic to the natural numbers. But in particular <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">N</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">N</span></span></span></span> isn't terminal in the klesli category, there are lots of maps from any set into <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">N</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">N</span></span></span></span>, so the limits aren't preserved in an obvious way.</p>\n<p>I've noted to myself, that in a language with side effects, the standard universal properties don't really work, every homset has lots of arrows for example, so you don't have initial and terminal objects. Klesli categories seem to faithfully reflect this disadvantage. Which I saw as an advantage of them for modeling and understanding standard side effecting imperative languages.</p>\n<p>I'm surprised this specific disadvantage is likely a key reason why klesli categories are less popular than eilenberg moore categories. Because imperative languages seem popular, in spite of sharing the same disadvantage. I'm curious \"why\" but I'm not sure it'd be easy to give a good simple reason for this.</p>\n<p>Something that strikes me, is I've always found it somewhat strange that programmers are drawn to very free structures like free-monoids - whereas mathematicians try to stick with somewhat nicer structures like groups. Klesli-categories being categories of <em>free</em> algebras, vs the mathematically preferred categories of algebras, seems to reflect this \"cultural\" preference at a deeper level.</p>\n<p>Is there a simple reason for this? </p>\n<p>I find myself trying to articulate questions like \"Are there more well behaved type systems than Klesli categories for effects systems, that also look like contemporary imperative languages?\" to poke at this distinction - but if somebody thinks they know why programmers prefer free stuff, I'd love to hear their take.</p>",
        "id": 527374855,
        "sender_full_name": "Alex Kreitzberg",
        "timestamp": 1751837951
    },
    {
        "content": "<p>I believe the reason programmers are drawn to free algebras is that free algebras naturally arise when you study <em>syntax</em>.  That is, when you have a bunch of operations and you write down a formula involving these operations and maybe some variables, like</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>⋅</mo><mo stretchy=\"false\">(</mo><mi>b</mi><mo>+</mo><mo stretchy=\"false\">(</mo><mi>c</mi><mo>⋅</mo><mo stretchy=\"false\">(</mo><mi>e</mi><mo>+</mo><mi>f</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>⋅</mo><mi>g</mi></mrow><annotation encoding=\"application/x-tex\"> a \\cdot (b + (c \\cdot (e + f))) \\cdot g </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mclose\">)))</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span></p>\n<p>you are giving an element in a <em>free</em> algebra of some monad.  Programmers are drawn to syntax because syntax is what you type into a computer.</p>\n<p>There's a sense in which \"Kleisli categories are to syntax as Eilenberg-Moore categories are to semantics\".</p>",
        "id": 527375259,
        "sender_full_name": "John Baez",
        "timestamp": 1751838456
    }
]