[
    {
        "content": "<p>With <span class=\"user-mention\" data-user-id=\"276696\">@Ambroise</span> and my dad, we've constructed a <a href=\"https://ncatlab.org/nlab/show/categorical+semantics+of+dependent+type+theory#categories_with_families\">category with families</a> of presheaves, analogous to Lawvere's <a href=\"https://ncatlab.org/nlab/show/axiom+of+separation#presheaves\">hyperdoctrine of presheaves</a>: are we reinventing the wheel?</p>\n<p>The base category is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><annotation encoding=\"application/x-tex\">𝐂𝐚𝐭</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\">Cat</span></span></span></span>, and a type over a context <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">C</mi><mo>∈</mo><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><annotation encoding=\"application/x-tex\">ℂ ∈ 𝐂𝐚𝐭</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.728em;vertical-align:-0.0391em;\"></span><span class=\"mord amsrm\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\">Cat</span></span></span></span> is a functor <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">C</mi><mo>→</mo><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow><annotation encoding=\"application/x-tex\">ℂ → 𝐒𝐞𝐭</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord amsrm\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\">Set</span></span></span></span>.<br>\nReindexing is by precomposition.</p>\n<p>A term of type <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext> ⁣</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi mathvariant=\"normal\">C</mi><mo>→</mo><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow><annotation encoding=\"application/x-tex\">A\\colon ℂ → 𝐒𝐞𝐭</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord amsrm\">C</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\">Set</span></span></span></span> is a global section, i.e., a natural transformation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>→</mo><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">1 → A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>.<br>\nReindexing is by whiskering.</p>\n<p>If our calculations are correct, we've proved that the category of elements construction gives context extension, and that left extension gives dependent sums. </p>\n<p>A bit more precisely, the category of elements <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>A</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{ A \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\">A</span><span class=\"mclose\">}</span></span></span></span> is the extended context, the projection <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi mathvariant=\"normal\">∂</mi><mi>A</mi><mn>1</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">∂¹_A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0894em;vertical-align:-0.2753em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4247em;margin-left:-0.0556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">A</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2753em;\"><span></span></span></span></span></span></span></span></span></span> is… the projection, and the global section <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi mathvariant=\"normal\">∂</mi><mi>A</mi><mn>2</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">∂²_A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0894em;vertical-align:-0.2753em;\"></span><span class=\"mord\"><span class=\"mord\" style=\"margin-right:0.05556em;\">∂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-2.4247em;margin-left:-0.0556em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">A</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2753em;\"><span></span></span></span></span></span></span></span></span></span> given by the comma category defining the category of elements is the “variable” term, as in the following diagram.</p>\n<p><a href=\"/user_uploads/21317/wYqZaFnkOAKmGBgFgwGMRnoj/Screenshot_2024-02-13_17-29-37.png\">Screenshot_2024-02-13_17-29-37.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/21317/wYqZaFnkOAKmGBgFgwGMRnoj/Screenshot_2024-02-13_17-29-37.png\" title=\"Screenshot_2024-02-13_17-29-37.png\"><img src=\"/user_uploads/21317/wYqZaFnkOAKmGBgFgwGMRnoj/Screenshot_2024-02-13_17-29-37.png\"></a></div><p>(I can sketch dependent sums in a bit more detail if people are curious.) </p>\n<p>Has anyone seen anything like this in the literature?</p>",
        "id": 421282241,
        "sender_full_name": "Tom Hirschowitz",
        "timestamp": 1707842158
    },
    {
        "content": "<p>Hi Tom, I have a very simple question. At the end of \"Syntax and semantics\" by Martin Hofmann, there is the presheaf cwf for a given category <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span>. Its base category is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><msup><mi>K</mi><mrow><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">p</mi></mrow></msup><mo separator=\"true\">,</mo><mrow><mi mathvariant=\"bold\">S</mi><mi mathvariant=\"bold\">e</mi><mi mathvariant=\"bold\">t</mi></mrow><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[K^{\\mathrm{op}}, \\mathbf{Set}]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">op</span></span></span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">Set</span></span><span class=\"mclose\">]</span></span></span></span> and a type on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi></mrow><annotation encoding=\"application/x-tex\">P</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span> is a presheaf on its category of elements. Is this presheaf cwf somehow a sub cwf of yours, or more generally, is it related?</p>",
        "id": 421285645,
        "sender_full_name": "Vincent Moreau",
        "timestamp": 1707843250
    },
    {
        "content": "<p>This looks like the structural part of Hofmann and Streicher's groupoid interpretation of type theory, lifted to categories instead of groupoids and restricting types to the discrete fibrations.</p>",
        "id": 421293069,
        "sender_full_name": "Josh Chen",
        "timestamp": 1707845835
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"383799\">Tom Hirschowitz</span> <a href=\"#narrow/stream/229136-theory.3A-category-theory/topic/CwF.20of.20presheaves/near/421282241\">said</a>:</p>\n<blockquote>\n<p>Has anyone seen anything like this in the literature?</p>\n</blockquote>\n<p>In <a href=\"https://arxiv.org/pdf/2111.09438.pdf\">the current version of my paper with Greta</a>, this appears as 5.3.6 (which is a very short Rmk, but the whole section prepares for it). This arXiv version is a tiny bit outdated at this point, we hope to push the new version in the next month or so.</p>",
        "id": 421359385,
        "sender_full_name": "Ivan Di Liberti",
        "timestamp": 1707877621
    },
    {
        "content": "<p>With Set-valued functors generalized to Cat-valued functors, this appears in the \"Semantics\" section of Licata and Harper's paper \"2-dimensional directed type theory\" and in Dan Licata's PhD Thesis, albeit without the language of CwFs.</p>",
        "id": 421364180,
        "sender_full_name": "Mike Shulman",
        "timestamp": 1707881175
    },
    {
        "content": "<p>Great! Thank you all for the pointers. <span class=\"user-mention\" data-user-id=\"629800\">@Vincent Moreau</span> Intriguing question... but I don't know the answer yet.</p>",
        "id": 421386379,
        "sender_full_name": "Tom Hirschowitz",
        "timestamp": 1707896458
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"277318\">@Ivan Di Liberti</span> it looks like this is not quite the same as our construction. Am I right that in your case, the projection functor from terms to types has as image only identity discrete fibrations?</p>",
        "id": 421401231,
        "sender_full_name": "Tom Hirschowitz",
        "timestamp": 1707902104
    },
    {
        "content": "<p>I might have misunderstood what you do, it's easier for me to talk about what we do. Contexts are categories, types are presheaves, context-extension is the category of elements.</p>",
        "id": 421438351,
        "sender_full_name": "Ivan Di Liberti",
        "timestamp": 1707915224
    },
    {
        "content": "<p>A term will look like a \"global element\" of a presheaf, and the projection is just giving you back the presheaf.</p>",
        "id": 421439073,
        "sender_full_name": "Ivan Di Liberti",
        "timestamp": 1707915467
    },
    {
        "content": "<p>Ok, then it's indeed the same thing, and I'm reading you wrongly. I thought your functor <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mtext>⊤</mtext></msub><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext> ⁣</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi>𝒦</mi><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo>→</mo><mi>𝐃</mi><mi>𝐅</mi><mi>𝐢</mi><mi>𝐛</mi></mrow><annotation encoding=\"application/x-tex\">∑_{⊤}\\colon 𝒦/1 → 𝐃𝐅𝐢𝐛</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1864em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathscr\" style=\"margin-right:0.31259em;\">K</span><span class=\"mord\">/1</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathbf\">DFib</span></span></span></span> mapped any object to the identity discrete (op?)fibration on it, which seemed to entail that terms were essentially the same as contexts. So how should I read the triangle above Defn 5.3.5? Or maybe that's not the triangle I should be looking at?</p>",
        "id": 421475693,
        "sender_full_name": "Tom Hirschowitz",
        "timestamp": 1707925905
    },
    {
        "content": "<p>What is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">K</mi><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\mathcal{K}/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.01445em;\">K</span><span class=\"mord\">/1</span></span></span></span>? is it isomorphic to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">K</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{K}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.01445em;\">K</span></span></span></span> ?</p>",
        "id": 421496110,
        "sender_full_name": "Ambroise",
        "timestamp": 1707931700
    }
]